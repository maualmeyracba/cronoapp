(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{54980:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},34464:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},31012:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},13718:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},92953:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/cotizador",function(){return t(41009)}])},43475:function(e,a,t){"use strict";t.d(a,{Z:function(){return DashboardLayout}});var s=t(85893),l=t(67294),n=t(41664),o=t.n(n),i=t(11163),r=t(41503),d=t(28477),c=t(85876),x=t(64712),p=t(54463),u=t(41352),m=t(39483),b=t(72367),h=t(34622),g=t(28909),f=t(81629),j=t(49525),v=t(71408),N=t(78051),w=t(77232);function DashboardLayout(e){let{children:a}=e,[t,n]=(0,l.useState)(!0),y=(0,i.useRouter)(),{user:k}=(0,r.a)(),handleLogout=async()=>{try{await (0,c.w7)(d.I8),window.location.href="/login"}catch(e){console.error("Error cerrando sesi\xf3n:",e)}},isActive=e=>y.pathname.startsWith(e),getLinkClass=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s="flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium text-sm ".concat(t?"":"justify-center px-2");return isActive(e)?"".concat(s," bg-indigo-600 text-white shadow-lg shadow-indigo-900/50"):a?"".concat(s," bg-rose-600/10 text-rose-400 hover:bg-rose-600 hover:text-white border border-rose-900/50 hover:border-rose-500"):"".concat(s," text-slate-300 hover:bg-slate-800 hover:text-white")};return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors duration-300 flex",children:[(0,s.jsx)(x.x7,{position:"top-right",richColors:!0,closeButton:!0,expand:!0}),(0,s.jsxs)("aside",{className:"fixed top-0 left-0 z-40 h-screen transition-all duration-300 bg-slate-900 text-white border-r border-slate-800 flex flex-col\n        ".concat(t?"w-64 translate-x-0":"w-20 -translate-x-full lg:translate-x-0"," \n        "),children:[(0,s.jsxs)("div",{className:"p-6 flex items-center ".concat(t?"justify-between":"justify-center"," shrink-0"),children:[t?(0,s.jsx)("span",{className:"text-xl font-black tracking-tighter text-indigo-400",children:"CRONOAPP"}):(0,s.jsx)(p.Z,{className:"text-indigo-400"}),(0,s.jsx)("button",{onClick:()=>n(!1),className:"lg:hidden text-slate-400 hover:text-white",children:(0,s.jsx)(u.Z,{})})]}),(0,s.jsxs)("nav",{className:"px-3 space-y-2 mt-4 flex-1 overflow-y-auto custom-scrollbar",children:[t&&(0,s.jsx)("div",{className:"px-4 py-2 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Operativa"}),(0,s.jsxs)(o(),{href:"/admin/dashboard",className:getLinkClass("/admin/dashboard"),title:"Dashboard",children:[(0,s.jsx)(m.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Dashboard"})]}),(0,s.jsxs)(o(),{href:"/admin/operaciones",className:getLinkClass("/admin/operaciones",!0),title:"Centro Control",children:[(0,s.jsx)(b.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Centro Control"})]}),(0,s.jsxs)(o(),{href:"/admin/planificacion",className:getLinkClass("/admin/planificacion"),title:"Planificador",children:[(0,s.jsx)(h.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Planificador"})]}),t&&(0,s.jsx)("div",{className:"px-4 py-2 text-[10px] font-black text-slate-500 uppercase tracking-widest mt-4",children:"Gesti\xf3n"}),(0,s.jsxs)(o(),{href:"/admin/crm",className:getLinkClass("/admin/crm"),title:"CRM Clientes",children:[(0,s.jsx)(g.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"CRM Clientes"})]}),(0,s.jsxs)(o(),{href:"/admin/servicios",className:getLinkClass("/admin/servicios"),title:"Servicios",children:[(0,s.jsx)(p.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Servicios"})]}),(0,s.jsxs)(o(),{href:"/admin/reportes",className:getLinkClass("/admin/reportes"),title:"Reportes",children:[(0,s.jsx)(f.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Reportes"})]}),(0,s.jsxs)(o(),{href:"/admin/rrhh",className:getLinkClass("/admin/rrhh"),title:"RRHH",children:[(0,s.jsx)(j.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"RRHH"})]}),t&&(0,s.jsx)("div",{className:"px-4 py-2 text-[10px] font-black text-slate-500 uppercase tracking-widest mt-4",children:"Sistema"}),(0,s.jsxs)(o(),{href:"/admin/configuracion",className:getLinkClass("/admin/configuracion"),title:"Configuraci\xf3n",children:[(0,s.jsx)(v.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Configuraci\xf3n"})]})]}),(0,s.jsx)("div",{className:"p-4 border-t border-slate-800 shrink-0 flex flex-col gap-2",children:(0,s.jsxs)("button",{onClick:handleLogout,className:"w-full flex items-center justify-center gap-3 px-4 py-3 text-rose-400 hover:bg-rose-900/20 hover:text-rose-300 rounded-xl transition-all font-medium text-sm",title:"Cerrar Sesi\xf3n",children:[(0,s.jsx)(N.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Salir"})]})})]}),(0,s.jsxs)("div",{className:"flex-1 transition-all duration-300 ".concat(t?"lg:ml-64":"lg:ml-20"),children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-4 shadow-sm border-b border-slate-200 dark:border-slate-700 flex items-center gap-4 sticky top-0 z-30",children:[(0,s.jsx)("button",{onClick:()=>n(!t),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 dark:text-slate-200 transition-colors",children:(0,s.jsx)(w.Z,{size:24})}),(0,s.jsx)("span",{className:"font-black text-slate-700 dark:text-white uppercase tracking-tight",children:t?"Panel de Control":"CronoApp"})]}),(0,s.jsx)("main",{className:"p-4 lg:p-8",children:a})]})]})}},41503:function(e,a,t){"use strict";t.d(a,{a:function(){return useAuth}}),t(85893);var s=t(67294);t(85876),t(28477),t(11163);let l=(0,s.createContext)({user:null,loading:!0,logout:async()=>{}}),useAuth=()=>(0,s.useContext)(l)},28477:function(e,a,t){"use strict";t.d(a,{I8:function(){return r},db:function(){return d},wk:function(){return c}});var s=t(83977),l=t(85876),n=t(93504),o=t(23914);let i=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyBJaTiMekwbGPXAm-mkPl_u6KEWCSpvfic",authDomain:"comtroldata.firebaseapp.com",projectId:"comtroldata",storageBucket:"comtroldata.firebasestorage.app",messagingSenderId:"698108879063",appId:"1:698108879063:web:ab30eb8b80a774f52f1092"}),r=(0,l.v0)(i),d=(0,n.ad)(i),c=(0,o.$C)(i)},41009:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return SmartCostingPage}});var s=t(85893),l=t(67294),n=t(9008),o=t.n(n),i=t(11163),r=t(43475),d=t(28477),c=t(93504),x=t(85876),p=t(64712),u=t(54980),m=t(84297);let b=(0,m.Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),h=(0,m.Z)("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var g=t(13718),f=t(31012),j=t(34464),v=t(41352);let N=(0,m.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),w=(0,m.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function SmartCostingPage(){let e=(0,i.useRouter)(),{clientId:a}=e.query,[t,n]=(0,l.useState)(1),[m,y]=(0,l.useState)([{id:"vig_gral",nombre:"Vigilador General",basico:98e4,viatico:25e4},{id:"monitoreo",nombre:"Operador de Monitoreo",basico:115e4,viatico:25e4}]),[k,C]=(0,l.useState)([{nombre:"M\xf3vil Patrulla",costo:55e4,tipo:"mensual",porPuesto:!1,icon:"Car"},{nombre:"Combustible",costo:28e4,tipo:"mensual",porPuesto:!1,icon:"Zap"},{nombre:"Moto 150cc",costo:22e4,tipo:"mensual",porPuesto:!1,icon:"Zap"},{nombre:"Tablet + App",costo:35e3,tipo:"mensual",porPuesto:!0,icon:"Wifi"},{nombre:"Equipo de Radio",costo:25e3,tipo:"mensual",porPuesto:!0,icon:"Radio"},{nombre:"Garita Qu\xedmica",costo:85e3,tipo:"mensual",porPuesto:!0,icon:"Package"},{nombre:"Kit C\xe1maras",costo:45e4,tipo:"fijo",porPuesto:!1,icon:"Package"}]),[M,D]=(0,l.useState)({cliente:"Nuevo Prospecto",zona:"cba",modalidad:"mensual",mesesContrato:24,fechaInicio:new Date().toISOString().split("T")[0],fechaFin:"",diasEvento:1,servicios:[{id:1,nombre:"Puesto Principal",cantidad:1,horas:24,dias:[1,2,3,4,5,6,0]}],teamMix:[{id:1,categoria:"Vigilador General",cantidad:4,basico:98e4,viatico:25e4}],presentismo:18e4,cargasPatronales:29,art:7.5,seguroVida:.65,sindicato:2,provisionSAC:8.33,provisionVacaciones:4.5,previsionDespido:2,ausentismo:5,capacidadHoraHombre:200,uniformeMensual:45e3,equipamiento:15e3,supervision:8,gastosEstructura:12,iibb:4.75,impuestoDebCred:1.2,diasPago:30,inflacionMensual:4,margenDeseado:18}),[E,S]=(0,l.useState)({nombre:"",cantidad:1,horas:12,dias:[1,2,3,4,5]}),[P,A]=(0,l.useState)({categoria:"",cantidad:1,basico:0,viatico:0}),[T,F]=(0,l.useState)([]),[Z,z]=(0,l.useState)({nombre:"",costo:0,tipo:"mensual",porPuesto:!1}),[I,R]=(0,l.useState)(!1),[L,O]=(0,l.useState)(!1),[H,_]=(0,l.useState)(!1),[V,q]=(0,l.useState)(!1),[G,B]=(0,l.useState)(!1),[U,J]=(0,l.useState)({alquileres:35e4,sueldosAdmin:25e5,sueldosSupervision:12e5,movilidadGeneral:45e4,impuestosFijos:15e4,otrosGastos:2e5,totalLegajosEmpresa:600,promedioSueldo:13e5}),[Q,K]=(0,l.useState)({}),[W,X]=(0,l.useState)([]);(0,l.useEffect)(()=>{let fetchEscalas=async()=>{B(!0);try{let e=(0,c.JU)(d.db,"settings_laborales","current_cba"),a=await (0,c.QT)(e);if(a.exists()){let e=a.data().ref,t=await (0,c.QT)((0,c.JU)(d.db,"settings_laborales",e));if(t.exists()){let e=t.data();e.categories&&y(e.categories),e.globals&&D(a=>({...a,...e.globals}))}}}catch(e){console.error(e)}finally{B(!1)}},fetchDefaults=async()=>{try{let e=(0,c.JU)(d.db,"settings_cotizador","defaults"),a=await (0,c.QT)(e);if(a.exists()){let e=a.data();e.estructuraData&&J(e.estructuraData),e.globales&&D(a=>({...a,uniformeMensual:e.globales.uniformeMensual,equipamiento:e.globales.equipamiento,supervision:e.globales.supervision,gastosEstructura:e.globales.gastosEstructura,iibb:e.globales.iibb,impuestoDebCred:e.globales.impuestoDebCred,margenDeseado:e.globales.margenDeseado}))}}catch(e){console.error(e)}};fetchEscalas(),fetchDefaults()},[]),(0,l.useEffect)(()=>{if(a){let loadClient=async()=>{try{let e=await (0,c.QT)((0,c.JU)(d.db,"clients",a));e.exists()&&D(a=>({...a,cliente:e.data().name||""}))}catch(e){console.error(e)}};loadClient()}},[a]),(0,l.useEffect)(()=>{calculateMetrics()},[M,T]);let calculateMetrics=()=>{let e=0;M.servicios.forEach(a=>{if("evento"===M.modalidad)e+=a.horas*a.cantidad*M.diasEvento;else{let t=a.horas*a.cantidad*a.dias.length;e+=4.33*t}});let a=0,t=0;M.teamMix.forEach(e=>{let s=e.basico+M.presentismo,l=s*((M.cargasPatronales+M.art+M.seguroVida+M.sindicato)/100),n=(s+l)*((M.provisionSAC+M.provisionVacaciones+M.previsionDespido+M.ausentismo)/100),o=s+l+e.viatico+n;a+=o*e.cantidad,t+=e.cantidad});let s=M.uniformeMensual*t,l=M.equipamiento*t,n=0,o=M.servicios.reduce((e,a)=>e+a.cantidad,0);T.forEach(e=>{let a=e.costo;e.porPuesto&&(a*=o),"mensual"===e.tipo&&(n+=a),"fijo"===e.tipo&&"mensual"===M.modalidad&&(n+=a/(M.mesesContrato||12))});let i=0,r=0,d=[],c=new Date;if(M.fechaInicio){let[e,a,t]=M.fechaInicio.split("-");c=new Date(parseInt(e),parseInt(a)-1,parseInt(t))}let x="evento"===M.modalidad?1:M.mesesContrato||12;for(let e=0;e<x;e++){let t=0;if("evento"===M.modalidad)M.servicios.forEach(e=>{t+=e.horas*e.cantidad*M.diasEvento});else{let e=c.getFullYear(),a=c.getMonth(),s=new Date(e,a+1,0).getDate();M.servicios.forEach(l=>{let n=0;for(let t=1;t<=s;t++){let s=new Date(e,a,t).getDay();l.dias.includes(s)&&n++}t+=l.horas*l.cantidad*n})}let o=Math.pow(1+M.inflacionMensual/100,e),x=a*o,p=(s+l+n)*o,u=(x+p)*(M.supervision/100),m=x+p+u,b=m*(M.gastosEstructura/100),h=m+b,g=M.inflacionMensual/100/30*M.diasPago,f=h*g,j=h+f,v=1-(M.iibb+M.impuestoDebCred+M.margenDeseado)/100,N=0;v>0&&(N=j/v),i+=t,r+=N,d.push({periodo:e+1,mes:c.toLocaleDateString("es-AR",{month:"short",year:"2-digit"}),horas:t,costo:j,venta:N,inflacionAcum:(o-1)*100,precioHora:t>0?N/t:0}),c.setMonth(c.getMonth()+1)}X(d);let p=d[0]||{},u=i/(M.mesesContrato||1)/200;K({costoLaboralTotal:p.costo?a:0,costoOperativoTotal:p.costo?s+l+n:0,precioVentaMes1:p.venta||0,costoFinancieroMes1:(p.costo||0)*(M.inflacionMensual/100/30*M.diasPago),horasTotales:Math.round(i),valorTotalContrato:r,precioHoraPromedio:i>0?r/i:0,precioHoraMes1:p.precioHora||0,dotacionTeorica:u,dotacionReal:t,costoDirectoTotal:p.costo?a+s+l+n+(a+s+l+n)*(M.supervision/100):0,costoEstructura:p.costo?(a+s+l+n+(a+s+l+n)*(M.supervision/100))*(M.gastosEstructura/100):0,costoFinanciero:p.costo?(a+s+l+n+(a+s+l+n)*(M.supervision/100))*(1+M.gastosEstructura/100)*(M.inflacionMensual/100/30*M.diasPago):0,precioVentaTotal:p.venta||0,costoTotalCompleto:p.costo||0})},handleInputChange=(e,a)=>D(t=>({...t,[e]:parseFloat(a)||a})),removeServiceLine=e=>D(a=>({...a,servicios:a.servicios.filter(a=>a.id!==e)})),toggleNewServiceDay=e=>{if(24===E.horas)return p.Am.info("24hs es semana completa");S(a=>({...a,dias:a.dias.includes(e)?a.dias.filter(a=>a!==e):[...a.dias,e]}))},handleDateChange=(e,a)=>{D(t=>({...t,["start"===e?"fechaInicio":"fechaFin"]:a}))},eliminarRolMix=e=>D(a=>({...a,teamMix:a.teamMix.filter(a=>a.id!==e)})),eliminarItem=e=>F(T.filter(a=>a.id!==e)),guardarConfiguracionGlobal=async()=>{try{await (0,c.pl)((0,c.JU)(d.db,"settings_cotizador","defaults"),{estructuraData:U,globales:{uniformeMensual:M.uniformeMensual,equipamiento:M.equipamiento,supervision:M.supervision,gastosEstructura:M.gastosEstructura,iibb:M.iibb,impuestoDebCred:M.impuestoDebCred,margenDeseado:M.margenDeseado},updatedAt:(0,c.Bt)()}),p.Am.success("Configuraci\xf3n guardada.")}catch(e){p.Am.error("Error al guardar config.")}},calcularPorcentajeEstructura=async()=>{let{alquileres:e,sueldosAdmin:a,sueldosSupervision:t,movilidadGeneral:s,impuestosFijos:l,otrosGastos:n,totalLegajosEmpresa:o,promedioSueldo:i}=U,r=o*(1.45*i);if(r>0){let o=(e+a+t+s+l+n)/r*100;D(e=>({...e,gastosEstructura:parseFloat(o.toFixed(2))})),await guardarConfiguracionGlobal(),O(!1),p.Am.success("Estructura: ".concat(o.toFixed(2),"%"))}else p.Am.error("Revise cantidad legajos")},guardarCotizacion=async()=>{try{var t;let s=(0,x.v0)(),l={createdAt:(0,c.Bt)(),createdBy:(null===(t=s.currentUser)||void 0===t?void 0:t.email)||"unknown",clientId:a||null,client:M.cliente,params:M,items:T,team:M.teamMix,results:Q,proyeccion:W,status:"BORRADOR"};await (0,c.ET)((0,c.hJ)(d.db,"quotes"),l),p.Am.success("Cotizaci\xf3n Guardada"),setTimeout(()=>{a?e.push("/admin/crm?clientId=".concat(a)):e.push("/admin/crm")},1500)}catch(e){p.Am.error("Error al guardar")}},formatMoney=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",maximumFractionDigits:0}).format(e||0);return(0,s.jsxs)(r.Z,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:"Smart Costing"})}),(0,s.jsx)(p.x7,{position:"top-center"}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-4 md:p-6 bg-slate-50 min-h-screen relative pb-32 animate-in fade-in",children:[(0,s.jsxs)("div",{className:"mb-8 flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"bg-indigo-600 p-3 rounded-lg text-white shadow",children:(0,s.jsx)(u.Z,{size:24})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-black text-slate-800",children:"Cotizador Enterprise"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Ingenier\xeda de Costos V.18"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:guardarConfiguracionGlobal,className:"px-4 py-2 border rounded-lg text-xs font-bold text-indigo-600 border-indigo-200 hover:bg-indigo-50 flex items-center gap-2",children:[(0,s.jsx)(b,{size:14})," Guardar Config"]}),(0,s.jsxs)("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-slate-800 text-white rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-700 shadow-md",children:[(0,s.jsx)(h,{size:14})," Auditor\xeda de C\xe1lculo"]}),a&&(0,s.jsx)("button",{onClick:()=>e.push("/admin/crm"),className:"px-4 py-2 border rounded-lg text-xs font-bold text-slate-500 hover:bg-slate-50",children:"Volver"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-8 space-y-6",children:[(0,s.jsx)("div",{className:"flex justify-between bg-white p-1 rounded-xl shadow-sm border border-slate-200",children:[{id:1,label:"1. Servicios"},{id:2,label:"2. Recursos"},{id:3,label:"3. Operativo"},{id:4,label:"4. Financiero"}].map(e=>(0,s.jsx)("button",{onClick:()=>n(e.id),className:"flex-1 py-3 rounded-lg text-xs font-bold transition-all ".concat(t===e.id?"bg-indigo-600 text-white shadow":"text-slate-400 hover:bg-slate-50"),children:e.label},e.id))}),(0,s.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 min-h-[500px]",children:[1===t&&(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,s.jsxs)("div",{className:"flex justify-between border-b pb-4 mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-black text-slate-800",children:"Configuraci\xf3n"}),(0,s.jsxs)("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[(0,s.jsx)("button",{onClick:()=>D({...M,modalidad:"mensual"}),className:"px-4 py-1 text-xs font-bold rounded ".concat("mensual"===M.modalidad?"bg-white shadow text-indigo-600":"text-slate-400"),children:"Mensual"}),(0,s.jsx)("button",{onClick:()=>D({...M,modalidad:"evento"}),className:"px-4 py-1 text-xs font-bold rounded ".concat("evento"===M.modalidad?"bg-white shadow text-emerald-600":"text-slate-400"),children:"Evento"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"input-box bg-white border border-slate-300 rounded-lg p-3 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 tracking-wider",children:"Cliente"}),(0,s.jsx)("input",{type:"text",value:M.cliente,onChange:e=>handleInputChange("cliente",e.target.value),className:"w-full text-lg font-black text-slate-800 outline-none"})]}),(0,s.jsxs)("div",{className:"input-box bg-white border border-slate-300 rounded-lg p-3 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 tracking-wider",children:"Zona"}),(0,s.jsx)("select",{value:M.zona,onChange:e=>D({...M,zona:e.target.value}),className:"w-full text-lg font-black text-slate-800 outline-none bg-transparent",children:[{id:"cba",nombre:"C\xf3rdoba Capital",flag:"\uD83C\uDDE6\uD83C\uDDF7"},{id:"interior_cba",nombre:"Interior Cba",flag:"⛰️"},{id:"bue",nombre:"Buenos Aires",flag:"\uD83C\uDFD9️"}].map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:["mensual"===M.modalidad?(0,s.jsxs)("div",{className:"input-box bg-white border border-slate-300 rounded-lg p-3 shadow-sm relative",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 tracking-wider",children:"Contrato (Meses)"}),(0,s.jsx)("input",{type:"number",value:M.mesesContrato,onChange:e=>handleInputChange("mesesContrato",e.target.value),className:"w-full text-lg font-black text-slate-800 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("span",{className:"absolute right-4 bottom-3 font-bold text-xs text-slate-400",children:"MESES"})]}):(0,s.jsxs)("div",{className:"input-box bg-white border border-slate-300 rounded-lg p-3 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 tracking-wider",children:"Fin de Evento"}),(0,s.jsx)("input",{type:"date",value:M.fechaFin,onChange:e=>handleDateChange("end",e.target.value),className:"w-full text-lg font-black text-slate-800 outline-none"})]}),(0,s.jsxs)("div",{className:"input-box bg-white border border-slate-300 rounded-lg p-3 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1 tracking-wider",children:"Inicio de Servicio"}),(0,s.jsx)("input",{type:"date",value:M.fechaInicio,onChange:e=>handleDateChange("start",e.target.value),className:"w-full text-lg font-black text-slate-800 outline-none"})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 border border-slate-200 p-5 rounded-xl",children:[(0,s.jsx)("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-4",children:"Agregar L\xednea"}),(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,s.jsxs)("div",{className:"col-span-5 bg-white border rounded-lg p-2 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"Puesto"}),(0,s.jsx)("input",{value:E.nombre,onChange:e=>S({...E,nombre:e.target.value}),className:"w-full font-bold text-sm outline-none"})]}),(0,s.jsxs)("div",{className:"col-span-2 bg-white border rounded-lg p-2 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"Cant."}),(0,s.jsx)("input",{type:"number",min:"1",value:E.cantidad,onChange:e=>S({...E,cantidad:parseInt(e.target.value)}),className:"w-full font-bold text-sm outline-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,s.jsxs)("div",{className:"col-span-3 bg-white border rounded-lg p-2 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"Horas"}),(0,s.jsxs)("select",{value:E.horas,onChange:e=>S({...E,horas:parseInt(e.target.value)}),className:"w-full font-bold text-sm outline-none bg-transparent",children:[(0,s.jsx)("option",{value:"24",children:"24 Hs"}),(0,s.jsx)("option",{value:"12",children:"12 Hs"}),(0,s.jsx)("option",{value:"8",children:"8 Hs"}),(0,s.jsx)("option",{value:"4",children:"4 Hs"})]})]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("button",{onClick:()=>{if(!E.nombre)return p.Am.error("Ingrese nombre");let e=E.dias;24===E.horas&&"mensual"===M.modalidad&&(e=[1,2,3,4,5,6,0]),D(a=>({...a,servicios:[...a.servicios,{...E,dias:e,id:Date.now()}]}))},className:"w-full bg-indigo-600 text-white font-bold py-2 rounded-lg shadow hover:bg-indigo-700 text-xs",children:"AGREGAR"})})]}),"mensual"===M.modalidad&&(0,s.jsx)("div",{className:"flex gap-2 mt-4 pt-3 border-t",children:[{id:1,label:"Lu"},{id:2,label:"Ma"},{id:3,label:"Mi"},{id:4,label:"Ju"},{id:5,label:"Vi"},{id:6,label:"Sa"},{id:0,label:"Do"}].map(e=>(0,s.jsx)("button",{onClick:()=>toggleNewServiceDay(e.id),disabled:24==E.horas,className:"h-8 flex-1 rounded border text-[10px] font-bold ".concat(E.dias.includes(e.id)?"bg-indigo-600 text-white":"bg-white text-slate-400"),children:e.label},e.id))})]}),(0,s.jsx)("div",{className:"space-y-2",children:M.servicios.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white border border-slate-200 rounded-lg shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-slate-800",children:e.nombre}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:[e.cantidad," Puestos x ",e.horas,"hs"]})]}),(0,s.jsx)("button",{onClick:()=>removeServiceLine(e.id),className:"text-slate-300 hover:text-red-500",children:(0,s.jsx)(g.Z,{})})]},e.id))})]}),2===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-black text-slate-800",children:"Mix de Recursos (Oferta)"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase block",children:"Demanda vs Oferta"}),(0,s.jsxs)("span",{className:"text-lg font-black ".concat(Q.dotacionReal<Q.dotacionTeorica?"text-amber-500":"text-emerald-500"),children:[Q.dotacionReal," / ",Math.ceil(Q.dotacionTeorica)," FTEs"]})]})]}),(0,s.jsx)("div",{className:"bg-slate-50 p-5 rounded-xl border border-slate-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,s.jsxs)("div",{className:"col-span-5 bg-white border rounded-lg p-2 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"Categor\xeda"}),(0,s.jsxs)("select",{onChange:e=>{let a=m.find(a=>a.id===e.target.value);a&&A({...P,categoria:a.nombre,basico:a.basico,viatico:a.viatico})},className:"w-full font-bold text-sm outline-none bg-transparent",children:[(0,s.jsx)("option",{children:"Seleccionar..."}),m.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,s.jsxs)("div",{className:"col-span-3 bg-white border rounded-lg p-2 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"B\xe1sico"}),(0,s.jsx)("input",{type:"number",value:P.basico,onChange:e=>A({...P,basico:parseFloat(e.target.value)}),className:"w-full font-bold text-sm outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,s.jsxs)("div",{className:"col-span-2 bg-white border rounded-lg p-2 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"Cant."}),(0,s.jsx)("input",{type:"number",value:P.cantidad,onChange:e=>A({...P,cantidad:parseFloat(e.target.value)}),className:"w-full font-bold text-sm outline-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("button",{onClick:()=>{P.categoria&&D(e=>({...e,teamMix:[...e.teamMix,{...P,id:Date.now()}]}))},className:"w-full bg-indigo-600 text-white font-bold py-2 rounded-lg shadow-md",children:(0,s.jsx)(f.Z,{})})})]})}),(0,s.jsx)("div",{className:"space-y-2",children:M.teamMix.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded-xl",children:[(0,s.jsxs)("span",{className:"font-bold",children:[e.cantidad,"x ",e.categoria]}),(0,s.jsx)("span",{className:"font-mono text-slate-500",children:formatMoney(e.basico)}),(0,s.jsx)("button",{onClick:()=>eliminarRolMix(e.id),className:"text-red-400",children:(0,s.jsx)(g.Z,{size:16})})]},e.id))}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:["cargasPatronales","art","ausentismo","previsionDespido"].map(e=>(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-2 text-center shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:e.substring(0,6)}),(0,s.jsx)("input",{value:M[e],onChange:a=>D({...M,[e]:parseFloat(a.target.value)}),className:"w-full text-center font-bold text-slate-700 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]},e))})]}),3===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-lg font-black text-slate-800 border-b pb-4 mb-4",children:"Costos Operativos"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white border border-slate-300 rounded-lg p-3 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Uniformes"}),(0,s.jsx)("input",{type:"number",value:M.uniformeMensual,onChange:e=>D({...M,uniformeMensual:parseFloat(e.target.value)}),className:"w-full text-lg font-black text-slate-800 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,s.jsxs)("div",{className:"bg-white border border-slate-300 rounded-lg p-3 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Equipos"}),(0,s.jsx)("input",{type:"number",value:M.equipamiento,onChange:e=>D({...M,equipamiento:parseFloat(e.target.value)}),className:"w-full text-lg font-black text-slate-800 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),(0,s.jsx)("div",{className:"bg-slate-50 p-5 rounded-2xl border border-slate-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,s.jsxs)("div",{className:"col-span-5 bg-white border rounded-lg p-2",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"\xcdtem"}),(0,s.jsx)("input",{value:Z.nombre,onChange:e=>z({...Z,nombre:e.target.value}),className:"w-full font-bold text-sm outline-none"})]}),(0,s.jsxs)("div",{className:"col-span-3 bg-white border rounded-lg p-2",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"Costo"}),(0,s.jsx)("input",{type:"number",value:Z.costo,onChange:e=>z({...Z,costo:parseFloat(e.target.value)}),className:"w-full font-bold text-sm outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,s.jsxs)("div",{className:"col-span-3 bg-white border rounded-lg p-2",children:[(0,s.jsx)("label",{className:"block text-[9px] font-bold text-slate-400 uppercase",children:"Tipo"}),(0,s.jsxs)("select",{value:Z.tipo,onChange:e=>z({...Z,tipo:e.target.value}),className:"w-full font-bold text-sm outline-none bg-transparent",children:[(0,s.jsx)("option",{value:"mensual",children:"Mensual"}),(0,s.jsx)("option",{value:"fijo",children:"Fijo"})]})]}),(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)("button",{onClick:()=>{Z.nombre&&Z.costo>0&&(F([...T,{...Z,id:Date.now()}]),z({...Z,nombre:"",costo:0}))},className:"w-full bg-indigo-600 text-white font-bold py-2 rounded-xl shadow-md",children:(0,s.jsx)(f.Z,{})})})]})}),T.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded-xl",children:[(0,s.jsx)("span",{className:"font-bold",children:e.nombre}),(0,s.jsx)("span",{className:"font-mono text-slate-500",children:formatMoney(e.costo)}),(0,s.jsx)("button",{onClick:()=>eliminarItem(e.id),className:"text-red-400",children:(0,s.jsx)(g.Z,{size:16})})]},e.id))]}),4===t&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-lg font-black text-slate-800 border-b pb-4 mb-4",children:"Cierre Financiero"}),(0,s.jsx)("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 mb-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white border border-indigo-200 rounded-lg p-3 shadow-sm",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-indigo-400 uppercase mb-1",children:"D\xedas de Pago"}),(0,s.jsx)("div",{className:"flex gap-2",children:[0,30,45,60].map(e=>(0,s.jsx)("button",{onClick:()=>D({...M,diasPago:e}),className:"flex-1 text-xs font-bold py-1 rounded ".concat(M.diasPago===e?"bg-indigo-600 text-white":"bg-gray-100 text-gray-500"),children:e},e))})]}),(0,s.jsxs)("div",{className:"bg-white border border-indigo-200 rounded-lg p-3 shadow-sm relative",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-indigo-400 uppercase mb-1",children:"Inflaci\xf3n Mensual"}),(0,s.jsx)("input",{type:"number",value:M.inflacionMensual,onChange:e=>D({...M,inflacionMensual:parseFloat(e.target.value)}),className:"w-full text-lg font-black text-indigo-900 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("span",{className:"absolute right-4 bottom-3 font-bold text-indigo-200",children:"%"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white border border-slate-300 rounded-lg p-3 shadow-sm relative",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Gastos Estructura"}),(0,s.jsx)("button",{onClick:()=>O(!0),className:"text-[9px] text-indigo-600 font-bold underline",children:"CALCULAR"})]}),(0,s.jsx)("input",{type:"number",value:M.gastosEstructura,onChange:e=>D({...M,gastosEstructura:parseFloat(e.target.value)}),className:"w-full text-lg font-black text-slate-800 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("span",{className:"absolute right-4 bottom-3 font-bold text-slate-300",children:"%"})]}),(0,s.jsxs)("div",{className:"bg-white border border-emerald-300 rounded-lg p-3 shadow-sm relative ring-2 ring-emerald-50",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-emerald-600 uppercase mb-1",children:"Margen Deseado"}),(0,s.jsx)("input",{type:"number",value:M.margenDeseado,onChange:e=>D({...M,margenDeseado:parseFloat(e.target.value)}),className:"w-full text-lg font-black text-emerald-700 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("span",{className:"absolute right-4 bottom-3 font-bold text-emerald-300",children:"%"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white border border-slate-300 rounded-lg p-3 shadow-sm relative",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"IIBB + Tasas"}),(0,s.jsx)("input",{value:M.iibb,onChange:e=>D({...M,iibb:parseFloat(e.target.value)}),className:"w-full text-lg font-black text-slate-800 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("span",{className:"absolute right-4 bottom-3 font-bold text-slate-300",children:"%"})]}),(0,s.jsxs)("div",{className:"bg-white border border-slate-300 rounded-lg p-3 shadow-sm relative",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Imp. Cheque"}),(0,s.jsx)("input",{value:M.impuestoDebCred,onChange:e=>D({...M,impuestoDebCred:parseFloat(e.target.value)}),className:"w-full text-lg font-black text-slate-800 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,s.jsx)("span",{className:"absolute right-4 bottom-3 font-bold text-slate-300",children:"%"})]})]})]})]})]}),(0,s.jsx)("div",{className:"lg:col-span-4 space-y-4",children:(0,s.jsx)("div",{className:"sticky top-6",children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-xl p-6 text-white shadow-2xl",children:[(0,s.jsx)("p",{className:"text-gray-400 text-[10px] font-bold uppercase tracking-widest mb-2",children:"Precio por Hora Mes 1"}),(0,s.jsx)("div",{className:"text-5xl font-black mb-6",children:formatMoney(Q.precioHoraMes1)}),(0,s.jsxs)("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs font-bold text-gray-400",children:[(0,s.jsx)("span",{children:"PRECIO MES 1"})," ",(0,s.jsx)("span",{children:formatMoney(Q.precioVentaMes1)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold text-emerald-400",children:[(0,s.jsx)("span",{children:"TOTAL CONTRATO"})," ",(0,s.jsx)("span",{children:formatMoney(Q.valorTotalContrato)})]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded p-3 mt-3 grid grid-cols-2 gap-2 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[9px] text-gray-400 uppercase",children:"HORAS TOTALES"}),(0,s.jsxs)("p",{className:"font-bold text-white text-sm",children:[Q.horasTotales," hs"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[9px] text-gray-400 uppercase",children:"PROMEDIO MES"}),(0,s.jsx)("p",{className:"font-bold text-white text-sm",children:formatMoney(Q.valorTotalContrato/(M.mesesContrato||1))})]})]}),(0,s.jsxs)("button",{onClick:()=>_(!0),className:"w-full mt-4 bg-indigo-600 py-2 rounded flex items-center justify-center gap-2 text-xs font-bold hover:bg-indigo-700 transition-colors",children:[(0,s.jsx)(j.Z,{size:14})," Ver Desglose"]})]})]})})})]}),(0,s.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 flex justify-between z-50 lg:pl-72",children:[(0,s.jsx)("button",{onClick:()=>n(e=>Math.max(1,e-1)),disabled:1===t,className:"px-6 py-3 font-bold text-gray-500 hover:bg-gray-100 rounded-lg disabled:opacity-50",children:"Atr\xe1s"}),t<4?(0,s.jsx)("button",{onClick:()=>n(e=>Math.min(4,e+1)),className:"px-8 py-3 bg-indigo-600 text-white font-bold rounded-lg shadow hover:bg-indigo-700",children:"Siguiente"}):(0,s.jsx)("button",{onClick:guardarCotizacion,className:"px-8 py-3 bg-emerald-600 text-white font-bold rounded-lg shadow hover:bg-emerald-700",children:"Guardar Final"})]})]}),L&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Calculadora Estructura"}),(0,s.jsx)("button",{onClick:()=>O(!1),children:(0,s.jsx)(v.Z,{})})]}),(0,s.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200 mb-4",children:[(0,s.jsx)("label",{className:"block text-[10px] font-bold text-indigo-700 uppercase",children:"Dotaci\xf3n Total"}),(0,s.jsx)("input",{type:"number",value:U.totalLegajosEmpresa,onChange:e=>J({...U,totalLegajosEmpresa:parseFloat(e.target.value)}),className:"w-full text-center font-black text-lg bg-white border border-indigo-300 rounded p-2 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:Object.keys(U).filter(e=>"totalLegajosEmpresa"!==e&&"promedioSueldo"!==e).map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[9px] text-gray-400 font-bold uppercase",children:e.replace(/([A-Z])/g," $1").trim()}),(0,s.jsx)("input",{type:"number",value:U[e],onChange:a=>J({...U,[e]:parseFloat(a.target.value)}),className:"w-full p-2 rounded border text-sm font-bold [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]},e))}),(0,s.jsx)("button",{onClick:calcularPorcentajeEstructura,className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-lg",children:"Calcular e Impactar"})]})}),V&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl p-0 overflow-hidden flex flex-col max-h-[90vh]",children:[(0,s.jsxs)("div",{className:"bg-indigo-900 p-6 text-white",children:[(0,s.jsxs)("h2",{className:"text-2xl font-black flex items-center gap-2",children:[(0,s.jsx)(N,{})," Memoria de C\xe1lculo"]}),(0,s.jsx)("p",{className:"text-indigo-200 text-sm mt-1",children:"Explicaci\xf3n t\xe9cnica de la l\xf3gica financiera utilizada."})]}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto space-y-6 text-sm text-slate-600",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 mb-2",children:"1. C\xe1lculo de Horas (Demanda)"}),(0,s.jsx)("p",{children:"Se calcula la cantidad exacta de horas operativas mensuales bas\xe1ndose en el calendario real (d\xedas h\xe1biles vs fines de semana) o la duraci\xf3n del evento."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 mb-2",children:"2. Costo Laboral (Oferta)"}),(0,s.jsxs)("p",{children:["Se suman los costos de todos los perfiles asignados (Sueldo B\xe1sico + Vi\xe1ticos + Adicionales). A este subtotal se le aplican las Cargas Sociales (",M.cargasPatronales,"%) y Provisiones (Aguinaldo, Vacaciones, Despido)."]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 mb-2",children:"3. Proyecci\xf3n de Flujo de Fondos (Cash Flow)"}),(0,s.jsxs)("p",{children:["El sistema proyecta el contrato a ",M.mesesContrato," meses aplicando el \xedndice de inflaci\xf3n mensual (",M.inflacionMensual,"%) de forma compuesta mes a mes. Esto ajusta el Costo Total del Contrato a valores futuros reales."]}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-slate-100 rounded border border-slate-200 font-mono text-xs",children:"F\xf3rmula: CostoMes_n = CostoBase * (1 + Inflacion)^n"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 mb-2",children:"4. Costo Financiero"}),(0,s.jsx)("p",{children:"Se calcula el costo de oportunidad del dinero basado en los D\xedas de Pago del cliente."})]})]}),(0,s.jsx)("div",{className:"p-4 border-t bg-slate-50 flex justify-end",children:(0,s.jsx)("button",{onClick:()=>q(!1),className:"px-6 py-2 bg-slate-800 text-white rounded-lg font-bold text-xs hover:bg-slate-700",children:"Entendido"})})]})}),H&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl p-6 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-xl font-black flex items-center gap-2",children:[(0,s.jsx)(w,{})," Proyecci\xf3n Financiera"]}),(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["Flujo de fondos proyectado a ",M.mesesContrato," meses con inflaci\xf3n del ",M.inflacionMensual,"%."]})]}),(0,s.jsx)("button",{onClick:()=>_(!1),children:(0,s.jsx)(v.Z,{})})]}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:(0,s.jsxs)("table",{className:"w-full text-xs text-left",children:[(0,s.jsx)("thead",{className:"bg-slate-100 font-bold text-slate-600 uppercase",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3",children:"Periodo"}),(0,s.jsx)("th",{className:"p-3",children:"Horas"}),(0,s.jsx)("th",{className:"p-3",children:"Inflaci\xf3n Acum."}),(0,s.jsx)("th",{className:"p-3",children:"Costo Total"}),(0,s.jsx)("th",{className:"p-3",children:"Precio Venta"}),(0,s.jsx)("th",{className:"p-3",children:"Valor Hora"}),(0,s.jsx)("th",{className:"p-3",children:"Margen $"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100",children:W.map((e,a)=>(0,s.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,s.jsx)("td",{className:"p-3 font-bold text-slate-700",children:e.mes}),(0,s.jsxs)("td",{className:"p-3",children:[Math.round(e.horas)," hs"]}),(0,s.jsxs)("td",{className:"p-3 text-red-500 font-bold",children:[e.inflacionAcum.toFixed(2),"%"]}),(0,s.jsx)("td",{className:"p-3 font-mono",children:formatMoney(e.costo)}),(0,s.jsx)("td",{className:"p-3 font-mono font-bold text-emerald-600 bg-emerald-50/50",children:formatMoney(e.venta)}),(0,s.jsx)("td",{className:"p-3 font-mono text-slate-500",children:formatMoney(e.precioHora)}),(0,s.jsxs)("td",{className:"p-3 font-mono text-indigo-600",children:["+",formatMoney(e.venta-e.costo)]})]},a))}),(0,s.jsx)("tfoot",{className:"bg-slate-900 text-white font-bold",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-3",colSpan:3,children:"TOTAL CONTRATO"}),(0,s.jsx)("td",{className:"p-3 font-mono",children:formatMoney(W.reduce((e,a)=>e+a.costo,0))}),(0,s.jsx)("td",{className:"p-3 font-mono text-emerald-300",children:formatMoney(Q.valorTotalContrato)}),(0,s.jsxs)("td",{colSpan:2,className:"p-3 font-mono",children:["+ ",formatMoney(Q.valorTotalContrato-W.reduce((e,a)=>e+a.costo,0))]})]})})]})})]})})]})}}},function(e){e.O(0,[761,897,963,712,354,774,888,179],function(){return e(e.s=92953)}),_N_E=e.O()}]);