(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{69062:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},70979:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},51853:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},98814:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},64998:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},13025:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},53642:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]])},13766:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},54976:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},22448:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},31012:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},29445:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]])},87764:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},13718:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(84297);let l=(0,s.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},81909:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/rrhh",function(){return t(38613)}])},43475:function(e,a,t){"use strict";t.d(a,{Z:function(){return DashboardLayout}});var s=t(85893),l=t(67294),r=t(41664),i=t.n(r),n=t(11163),d=t(41503),o=t(28477),c=t(85876),x=t(64712),m=t(54463),h=t(41352),p=t(39483),u=t(72367),b=t(34622),g=t(28909),f=t(81629),j=t(49525),v=t(71408),N=t(78051),y=t(77232);function DashboardLayout(e){let{children:a}=e,[t,r]=(0,l.useState)(!0),k=(0,n.useRouter)(),{user:w}=(0,d.a)(),handleLogout=async()=>{try{await (0,c.w7)(o.I8),window.location.href="/login"}catch(e){console.error("Error cerrando sesi\xf3n:",e)}},isActive=e=>k.pathname.startsWith(e),getLinkClass=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s="flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium text-sm ".concat(t?"":"justify-center px-2");return isActive(e)?"".concat(s," bg-indigo-600 text-white shadow-lg shadow-indigo-900/50"):a?"".concat(s," bg-rose-600/10 text-rose-400 hover:bg-rose-600 hover:text-white border border-rose-900/50 hover:border-rose-500"):"".concat(s," text-slate-300 hover:bg-slate-800 hover:text-white")};return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors duration-300 flex",children:[(0,s.jsx)(x.x7,{position:"top-right",richColors:!0,closeButton:!0,expand:!0}),(0,s.jsxs)("aside",{className:"fixed top-0 left-0 z-40 h-screen transition-all duration-300 bg-slate-900 text-white border-r border-slate-800 flex flex-col\n        ".concat(t?"w-64 translate-x-0":"w-20 -translate-x-full lg:translate-x-0"," \n        "),children:[(0,s.jsxs)("div",{className:"p-6 flex items-center ".concat(t?"justify-between":"justify-center"," shrink-0"),children:[t?(0,s.jsx)("span",{className:"text-xl font-black tracking-tighter text-indigo-400",children:"CRONOAPP"}):(0,s.jsx)(m.Z,{className:"text-indigo-400"}),(0,s.jsx)("button",{onClick:()=>r(!1),className:"lg:hidden text-slate-400 hover:text-white",children:(0,s.jsx)(h.Z,{})})]}),(0,s.jsxs)("nav",{className:"px-3 space-y-2 mt-4 flex-1 overflow-y-auto custom-scrollbar",children:[t&&(0,s.jsx)("div",{className:"px-4 py-2 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Operativa"}),(0,s.jsxs)(i(),{href:"/admin/dashboard",className:getLinkClass("/admin/dashboard"),title:"Dashboard",children:[(0,s.jsx)(p.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Dashboard"})]}),(0,s.jsxs)(i(),{href:"/admin/operaciones",className:getLinkClass("/admin/operaciones",!0),title:"Centro Control",children:[(0,s.jsx)(u.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Centro Control"})]}),(0,s.jsxs)(i(),{href:"/admin/planificacion",className:getLinkClass("/admin/planificacion"),title:"Planificador",children:[(0,s.jsx)(b.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Planificador"})]}),t&&(0,s.jsx)("div",{className:"px-4 py-2 text-[10px] font-black text-slate-500 uppercase tracking-widest mt-4",children:"Gesti\xf3n"}),(0,s.jsxs)(i(),{href:"/admin/crm",className:getLinkClass("/admin/crm"),title:"CRM Clientes",children:[(0,s.jsx)(g.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"CRM Clientes"})]}),(0,s.jsxs)(i(),{href:"/admin/servicios",className:getLinkClass("/admin/servicios"),title:"Servicios",children:[(0,s.jsx)(m.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Servicios"})]}),(0,s.jsxs)(i(),{href:"/admin/reportes",className:getLinkClass("/admin/reportes"),title:"Reportes",children:[(0,s.jsx)(f.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Reportes"})]}),(0,s.jsxs)(i(),{href:"/admin/rrhh",className:getLinkClass("/admin/rrhh"),title:"RRHH",children:[(0,s.jsx)(j.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"RRHH"})]}),t&&(0,s.jsx)("div",{className:"px-4 py-2 text-[10px] font-black text-slate-500 uppercase tracking-widest mt-4",children:"Sistema"}),(0,s.jsxs)(i(),{href:"/admin/configuracion",className:getLinkClass("/admin/configuracion"),title:"Configuraci\xf3n",children:[(0,s.jsx)(v.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Configuraci\xf3n"})]})]}),(0,s.jsx)("div",{className:"p-4 border-t border-slate-800 shrink-0 flex flex-col gap-2",children:(0,s.jsxs)("button",{onClick:handleLogout,className:"w-full flex items-center justify-center gap-3 px-4 py-3 text-rose-400 hover:bg-rose-900/20 hover:text-rose-300 rounded-xl transition-all font-medium text-sm",title:"Cerrar Sesi\xf3n",children:[(0,s.jsx)(N.Z,{size:20})," ",t&&(0,s.jsx)("span",{children:"Salir"})]})})]}),(0,s.jsxs)("div",{className:"flex-1 transition-all duration-300 ".concat(t?"lg:ml-64":"lg:ml-20"),children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-4 shadow-sm border-b border-slate-200 dark:border-slate-700 flex items-center gap-4 sticky top-0 z-30",children:[(0,s.jsx)("button",{onClick:()=>r(!t),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 dark:text-slate-200 transition-colors",children:(0,s.jsx)(y.Z,{size:24})}),(0,s.jsx)("span",{className:"font-black text-slate-700 dark:text-white uppercase tracking-tight",children:t?"Panel de Control":"CronoApp"})]}),(0,s.jsx)("main",{className:"p-4 lg:p-8",children:a})]})]})}},41503:function(e,a,t){"use strict";t.d(a,{a:function(){return useAuth}}),t(85893);var s=t(67294);t(85876),t(28477),t(11163);let l=(0,s.createContext)({user:null,loading:!0,logout:async()=>{}}),useAuth=()=>(0,s.useContext)(l)},28477:function(e,a,t){"use strict";t.d(a,{I8:function(){return d},db:function(){return o},wk:function(){return c}});var s=t(83977),l=t(85876),r=t(93504),i=t(23914);let n=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyBJaTiMekwbGPXAm-mkPl_u6KEWCSpvfic",authDomain:"comtroldata.firebaseapp.com",projectId:"comtroldata",storageBucket:"comtroldata.firebasestorage.app",messagingSenderId:"698108879063",appId:"1:698108879063:web:ab30eb8b80a774f52f1092"}),d=(0,l.v0)(n),o=(0,r.ad)(n),c=(0,i.$C)(n)},38613:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return EmployeesPage}});var s=t(85893),l=t(67294),r=t(43475),i=t(28477),n=t(93504);let d={getAll:async()=>{let e=(0,n.IO)((0,n.hJ)(i.db,"ausencias"),(0,n.Xo)("startDate","desc")),a=await (0,n.PL)(e);return a.docs.map(e=>{let a=e.data();return{id:e.id,...a,employeeName:a.employeeName||"",status:a.status||"Pendiente",hasCertificate:a.hasCertificate||!1,reason:a.reason||"",comments:a.comments||""}})},add:async e=>(0,n.ET)((0,n.hJ)(i.db,"ausencias"),{...e,createdAt:new Date().toISOString()}),update:async(e,a)=>(0,n.r7)((0,n.JU)(i.db,"ausencias",e),a),delete:e=>(0,n.oe)((0,n.JU)(i.db,"ausencias",e))},o={getAll:async()=>{let e=(0,n.IO)((0,n.hJ)(i.db,"feriados"),(0,n.Xo)("date","asc")),a=await (0,n.PL)(e);return a.docs.map(e=>({id:e.id,...e.data()}))},add:async e=>(0,n.ET)((0,n.hJ)(i.db,"feriados"),e),delete:e=>(0,n.oe)((0,n.JU)(i.db,"feriados",e)),syncWithGovApi:async e=>{try{let a=await fetch("https://nolaborables.com.ar/api/v2/feriados/".concat(e));if(!a.ok)throw Error("No se pudo conectar con el servidor de feriados.");let t=await a.json(),s=0,l=(0,n.IO)((0,n.hJ)(i.db,"feriados"),(0,n.ar)("date",">=","".concat(e,"-01-01")),(0,n.ar)("date","<=","".concat(e,"-12-31"))),r=await (0,n.PL)(l),d=new Set(r.docs.map(e=>e.data().date)),o=t.map(async a=>{let t=String(a.mes).padStart(2,"0"),l=String(a.dia).padStart(2,"0"),r="".concat(e,"-").concat(t,"-").concat(l);if(!d.has(r))return s++,(0,n.ET)((0,n.hJ)(i.db,"feriados"),{date:r,name:a.motivo,type:"Nacional"})});return await Promise.all(o),s}catch(e){throw console.error("Error importando feriados:",e),e}}},c={getAll:async()=>{try{let e=(0,n.IO)((0,n.hJ)(i.db,"convenios_colectivos")),a=await (0,n.PL)(e);return a.docs.map(e=>{var a;let t=e.data();return{id:e.id,name:t.name||"Sin Nombre",code:t.code||"",maxHoursWeekly:Number(t.maxHoursWeekly||48),maxHoursMonthly:Number(t.maxHoursMonthly||200),saturdayCutoffHour:Number(t.saturdayCutoffHour||13),saturdayRate:Number(void 0!==t.saturdayRate?t.saturdayRate:100),nightShiftStart:Number(t.nightShiftStart||21),nightShiftEnd:Number(t.nightShiftEnd||6),paysDoubleOnFranco:null===(a=t.paysDoubleOnFranco)||void 0===a||a,categories:Array.isArray(t.categories)?t.categories:[]}})}catch(e){return console.error("Error leyendo convenios:",e),[]}},add:async e=>(0,n.ET)((0,n.hJ)(i.db,"convenios_colectivos"),{...e,isActive:!0,createdAt:new Date}),update:async(e,a)=>(0,n.r7)((0,n.JU)(i.db,"convenios_colectivos",e),a),delete:e=>(0,n.oe)((0,n.JU)(i.db,"convenios_colectivos",e))};var x=t(85876),m=t(92243),h=t(29445),p=t(84297);let u=(0,p.Z)("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),b=(0,p.Z)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var g=t(31012),f=t(87764),j=t(98814),v=t(64998),N=t(13718),y=t(41352),k=t(54976);let w=(0,p.Z)("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),C=(0,p.Z)("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);var S=t(69062),D=t(13766),A=t(70979),E=t(22448),L=t(49525),I=t(51853),O=t(34622),Z=t(28909);let M=(0,p.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var z=t(13025);let P=(0,p.Z)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);var T=t(53642);let H=(0,p.Z)("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);var R=t(13756);let getArgentinaDate=e=>{var a,t,s;if(!e)return"";let l=e.toDate?e.toDate():new Date(e),r=new Intl.DateTimeFormat("es-AR",{timeZone:"America/Argentina/Cordoba",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(l),i=null===(a=r.find(e=>"day"===e.type))||void 0===a?void 0:a.value,n=null===(t=r.find(e=>"month"===e.type))||void 0===t?void 0:t.value,d=null===(s=r.find(e=>"year"===e.type))||void 0===s?void 0:s.value;return"".concat(d,"-").concat(n,"-").concat(i)},parseCSV=e=>{let a=e.replace(/^\uFEFF/,"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t=a.split("\n").filter(e=>e.trim().length>0);if(t.length<2)return[];let s=t[0],l=s.includes(";")?";":",",r=s.split(l).map(e=>e.trim().toLowerCase().replace(/^"|"$/g,"")),i=[];for(let e=1;e<t.length;e++){let a=t[e];if(!a.trim()||0===a.replace(/;/g,"").trim().length)continue;let s=[];if(";"===l)s=a.split(";");else{let e=a.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);s=e||a.split(",")}let n={};r.forEach((e,a)=>{let t=s[a]?s[a].trim():"";t=t.replace(/^"|"$/g,""),n[e]=t}),i.push(n)}return i},parseDateString=e=>{if(!e)return"";if(e.match(/^\d{4}-\d{2}-\d{2}$/))return e;let a=e.split(/[/\-]/);if(3===a.length){let e=a[0].padStart(2,"0"),t=a[1].padStart(2,"0"),s=2===a[2].length?"20"+a[2]:a[2];return"".concat(s,"-").concat(t,"-").concat(e)}return""},createEmployeeObject=(e,a)=>{let t="";if(e.preferredObjectiveId&&"undefined"!==e.preferredObjectiveId)t=e.preferredObjectiveId;else if(e.objectiveName){let s=e.objectiveName.toLowerCase().trim(),l=a.find(e=>e.name.toLowerCase().trim()===s);l||(l=a.find(e=>e.name.toLowerCase().includes(s)||s.includes(e.name.toLowerCase()))),l&&(t=l.id)}let s="",l=(e.lastName||"").trim(),r=(e.firstName||"").trim();s=(s=l&&r?l.toLowerCase().includes(r.toLowerCase())?l:"".concat(l,", ").concat(r):l||r||"Desconocido").toUpperCase();let i=e.cycleStartDay?parseInt(e.cycleStartDay.toString().replace(/[^0-9]/g,"")):26;return{firstName:r,lastName:l,name:s,dni:e.dni||"",cuil:e.cuil||"",fileNumber:e.fileNumber||"",email:e.email||"",phone:e.phone||"",address:e.address||"",lat:e.lat||null,lng:e.lng||null,category:e.category||"Vigilador",cct:e.cct||"Seguridad Privada",laborAgreement:e.laborAgreement||"SUVICO",status:e.status?e.status.toLowerCase():"activo",role:"employee",isAvailable:!0,contractType:e.contractType||"FullTime",periodType:e.periodType||"Mensual",startDate:e.startDate||new Date().toISOString().split("T")[0],cycleStartDay:isNaN(i)?26:i,maxHours:200,preferredClientId:"",preferredObjectiveId:t,createdAt:new Date().toISOString(),sizes:e.sizes||{shirt:"",pants:"",shoes:""}}},getNightDuration=(e,a,t,s)=>{let l=0,r=new Date(e.getTime()),i=a.getTime();for(;r.getTime()<i;){let e=r.getHours();(e>=t||e<s)&&l++,r.setMinutes(r.getMinutes()+1)}return l/60},F=["M","T","N","D12","N12","PU","GU","FT"],U={M:8,T:8,N:8,D12:12,N12:12,PU:12,GU:8,FT:0,F:0,V:0,L:0,A:0,E:0};function EmployeesPage(){var e,a,t,p,_,J,V,K,G;let{addToast:q}=(0,m.p)(),[B,W]=(0,l.useState)("Cargando..."),[Y,X]=(0,l.useState)(new Date),[$,Q]=(0,l.useState)("legajos"),[ee,ea]=(0,l.useState)("list"),[et,es]=(0,l.useState)(null),[el,er]=(0,l.useState)([]),[ei,en]=(0,l.useState)([]),[ed,eo]=(0,l.useState)(""),[ec,ex]=(0,l.useState)(null),[em,eh]=(0,l.useState)(!1),[ep,eu]=(0,l.useState)({totalEmployees:0,activeAbsences:0,nextHolidays:0}),[eb,eg]=(0,l.useState)([]),[ef,ej]=(0,l.useState)([]),[ev,eN]=(0,l.useState)([]),[ey,ek]=(0,l.useState)([]),[ew,eC]=(0,l.useState)([]),[eS,eD]=(0,l.useState)(""),[eA,eE]=(0,l.useState)([]),[eL,eI]=(0,l.useState)(!1),eO={employeeId:"",employeeName:"",type:"Enfermedad",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],status:"Pendiente",hasCertificate:!1,reason:"",comments:""},[eZ,eM]=(0,l.useState)(eO),[ez,eP]=(0,l.useState)(!1),[eT,eH]=(0,l.useState)({date:"",name:"",type:"Nacional"}),[eR,eF]=(0,l.useState)(new Date().getFullYear()),[eU,e_]=(0,l.useState)(!1),eJ={name:"",code:"",maxHoursWeekly:48,maxHoursMonthly:200,saturdayCutoffHour:13,saturdayRate:0,nightShiftStart:21,nightShiftEnd:6,paysDoubleOnFranco:!0,categories:[],holidayIsPlus:!0,sundayIs100:!1},[eV,eK]=(0,l.useState)(eJ),[eG,eq]=(0,l.useState)(""),[eB,eW]=(0,l.useState)(!1),[eY,eX]=(0,l.useState)(!1),[e$,eQ]=(0,l.useState)(""),[e0,e2]=(0,l.useState)(""),[e1,e4]=(0,l.useState)([]),[e3,e5]=(0,l.useState)(!1),[e6,e8]=(0,l.useState)("PERSONAL"),e7={firstName:"",lastName:"",dni:"",fileNumber:"",phone:"",email:"",category:"",status:"activo",laborAgreement:"",preferredClientId:"",preferredObjectiveId:"",sizes:{shirt:"",pants:"",shoes:""},cuil:"",address:"",lat:null,lng:null,contractType:"FullTime",periodType:"Mensual",cycleStartDay:26,maxHours:200},[e9,ae]=(0,l.useState)(e7),[aa,at]=(0,l.useState)([]),[as,al]=(0,l.useState)(!1),[ar,ai]=(0,l.useState)(!1),[an,ad]=(0,l.useState)(!1),[ao,ac]=(0,l.useState)(!1),ax="w-full p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl font-bold text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all",am="w-full p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl font-bold text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all appearance-none",ah="text-[10px] font-black uppercase text-slate-500 dark:text-slate-400 mb-1 block ml-1";(0,l.useEffect)(()=>{let e=(0,x.v0)();(0,x.Aj)(e,e=>{e?W(e.displayName||e.email||"Usuario Sin Nombre"):W("No Logueado")})},[]);let registrarAuditoria=async(e,a)=>{try{let t=(0,x.v0)(),s=t.currentUser;await (0,n.ET)((0,n.hJ)(i.db,"audit_logs"),{timestamp:(0,n.Bt)(),actorUid:(null==s?void 0:s.uid)||"unknown",actorName:(null==s?void 0:s.displayName)||(null==s?void 0:s.email)||"Desc",action:e,module:"RRHH",details:a,metadata:{platform:"web"}})}catch(e){}},getCycleDates=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:26,t=e.getFullYear(),s=e.getMonth(),l=new Date(t,s-1,a);l.setHours(0,0,0,0);let r=new Date(t,s,a-1);return r.setHours(23,59,59,999),{start:l,end:r}},eliminarReplicasPlanificador=async e=>{try{let a=(0,n.IO)((0,n.hJ)(i.db,"turnos"),(0,n.ar)("absenceId","==",e)),t=await (0,n.PL)(a),s=(0,n.qs)(i.db);t.docs.forEach(e=>s.delete(e.ref)),await s.commit()}catch(e){}};(0,l.useEffect)(()=>{loadData(),loadClientsAndObjectives(),loadAbsences(),loadHolidays(),loadAgreements()},[]),(0,l.useEffect)(()=>{let e=ey.filter(e=>"Pendiente"===e.status||"Justificada"===e.status).length,a=eA.filter(e=>new Date(e.date)>=new Date).length;eu({totalEmployees:el.length,activeAbsences:e,nextHolidays:a})},[el,ey,eA]),(0,l.useEffect)(()=>{let e=ed.toLowerCase();en(el.filter(a=>(a.lastName||"").toLowerCase().includes(e)||(a.firstName||"").toLowerCase().includes(e)||(a.fileNumber||"").includes(e)))},[ed,el]),(0,l.useEffect)(()=>{let e=eS.toLowerCase();eC(ey.filter(a=>{let t=a.employeeName||"",s=t;if(!t&&a.employeeId){let e=el.find(e=>e.id===a.employeeId);e&&(s="".concat(e.lastName," ").concat(e.firstName))}return s.toLowerCase().includes(e)}))},[eS,ey,el]),(0,l.useEffect)(()=>{if(e9.laborAgreement){var e;let a=ev.find(e=>e.name===e9.laborAgreement);at((null==a?void 0:null===(e=a.categories)||void 0===e?void 0:e.length)?a.categories:["General"])}else at([])},[e9.laborAgreement,ev]),(0,l.useEffect)(()=>{et&&eA.length>0&&calculateStats(et.id,et.laborAgreement||"",et.cycleStartDay||26)},[Y,et,eA,ev]);let loadData=async()=>{try{let e=await (0,n.PL)((0,n.hJ)(i.db,"empleados")),a=e.docs.map(e=>({id:e.id,...e.data()})),t=a.sort((e,a)=>(e.lastName||"").localeCompare(a.lastName||""));er(t)}catch(e){console.error("Error cargando empleados:",e)}},loadAbsences=async()=>{let e=await d.getAll();ek(e)},loadHolidays=async()=>{let e=await o.getAll();eE(e)},loadAgreements=async()=>{let e=await c.getAll();eN(e.map(e=>({...e,categories:Array.isArray(e.categories)?e.categories:[],paysDoubleOnFranco:!!e.paysDoubleOnFranco})))},loadClientsAndObjectives=async()=>{try{let e=await (0,n.PL)((0,n.hJ)(i.db,"clients"));eg(e.docs.map(e=>({id:e.id,...e.data()})));let a=await (0,n.PL)((0,n.IO)((0,n.hJ)(i.db,"servicios_sla"),(0,n.ar)("status","==","active")));ej(a.docs.map(e=>({id:e.id,name:e.data().objectiveName||e.data().name,clientId:e.data().clientId})))}catch(e){}},calculateStats=async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:26;eh(!0);try{var s,l;let r=ev.find(e=>e.name===a)||eJ,d={...r,holidayIsPlus:null===(s=r.holidayIsPlus)||void 0===s||s,paysDoubleOnFranco:null===(l=r.paysDoubleOnFranco)||void 0===l||l},{start:o,end:c}=getCycleDates(Y,t),x=(0,n.IO)((0,n.hJ)(i.db,"turnos"),(0,n.ar)("employeeId","==",e),(0,n.ar)("startTime",">=",n.EK.fromDate(o)),(0,n.ar)("startTime","<=",n.EK.fromDate(c))),m=await (0,n.PL)(x),h=m.docs.map(e=>({...e.data(),id:e.id})).sort((e,a)=>e.startTime.seconds-a.startTime.seconds),p=(0,n.IO)((0,n.hJ)(i.db,"ausencias"),(0,n.ar)("employeeId","==",e)),u=await (0,n.PL)(p),b=0,g=0,f=0,j=0;u.docs.forEach(e=>{let a=e.data(),[t,s,l]=a.startDate.split("-").map(Number),[r,i,n]=a.endDate.split("-").map(Number),d=new Date(t,s-1,l),x=new Date(r,i-1,n);if(d<=c&&x>=o){let e=Math.floor((x.getTime()-d.getTime())/864e5)+1,t=(a.type||"").toLowerCase();t.includes("vacacion")?b+=e:t.includes("enfermedad")||t.includes("medico")?j+=e:t.includes("licencia")?g+=e:f+=e}});let v=0,N=0,y=0,k=0,w=0,C=0,S=0,D=new Map,A={};eA.forEach(e=>{A[e.date]=!0}),h.forEach(e=>{("F"===e.code||e.isFranco||"FF"===e.code)&&S++}),h.forEach(e=>{if("Canceled"===e.status)return;let a=(e.code||"").trim().toUpperCase();if("NOVEDAD"===e.type||!F.includes(a))return;let t=e.startTime.toDate(),s=e.endTime.toDate(),l=(s.getTime()-t.getTime())/36e5;(l<0||l>24)&&(l=U[a]||8),y+=l,s<=new Date&&(k+=l);let r="Sin Asignar";if(e.objectiveId){let a=ef.find(a=>a.id===e.objectiveId);a&&(r=a.name)}else if(e.objectiveName&&!e.objectiveName.includes("undefined")&&(r=e.objectiveName).length>15&&!r.includes(" ")){let e=ef.find(e=>e.id===r);e&&(r=e.name)}if("Sin Asignar"===r&&e.clientId){let a=eb.find(a=>a.id===e.clientId);r=a?"Cliente: ".concat(a.name):"Cliente: ".concat(e.clientId)}D.set(r,(D.get(r)||0)+l);let i=getNightDuration(t,s,d.nightShiftStart,d.nightShiftEnd);N+=i;let n=getArgentinaDate(e.startTime),o=A[n],c=e.isFrancoTrabajado||"FT"===a;o&&(C+=l),c?w+=l:v+=l});let E=d.maxHoursMonthly||200,L=Math.max(0,v-E),I=Math.min(v,E);ex({totalPlanificado:Math.round(y),totalRealizado:Math.round(k),progress:y>0?Math.round(k/y*100):0,nightHours:Math.round(N),dayHours:Math.round(I),extra100:Math.round(w),extra50:Math.round(L),plusFeriado:Math.round(C),francosCount:S,vacationsCount:b,licensesCount:g+j,absencesCount:f,objectives:Array.from(D.entries()).map(e=>{let[a,t]=e;return{name:a,hours:t}}),shiftsCount:h.filter(e=>F.includes((e.code||"").trim().toUpperCase())).length,monthlyLimit:d.maxHoursMonthly,isOverLimit:v>d.maxHoursMonthly,reportData:{turnos:h,ausencias:u.docs.map(e=>e.data())}})}catch(e){console.error(e),q("Error stats","error")}finally{eh(!1)}},changeMonth=e=>{let a=new Date(Y);a.setMonth(a.getMonth()+e),X(a)},handleRowClick=e=>{es(e)},handleSave=async()=>{if(!e9.lastName)return q("El apellido es obligatorio","error");let e={firstName:e9.firstName||"",lastName:e9.lastName||"",name:"".concat(e9.lastName||"",", ").concat(e9.firstName||"").toUpperCase(),dni:e9.dni||"",cuil:e9.cuil||"",fileNumber:e9.fileNumber||"",email:e9.email||"",phone:e9.phone||"",address:e9.address||"",lat:e9.lat||null,lng:e9.lng||null,category:e9.category||"Vigilador",cct:e9.cct||"",laborAgreement:e9.laborAgreement||"",status:e9.status||"activo",role:"employee",contractType:e9.contractType||"FullTime",periodType:e9.periodType||"Mensual",startDate:e9.startDate||new Date().toISOString().split("T")[0],cycleStartDay:e9.cycleStartDay?parseInt(e9.cycleStartDay):26,maxHours:e9.maxHours||200,preferredClientId:e9.preferredClientId||"",preferredObjectiveId:e9.preferredObjectiveId||"",sizes:e9.sizes||{shirt:"",pants:"",shoes:""}};try{if(as&&e9.id)await (0,n.r7)((0,n.JU)(i.db,"empleados",e9.id),e),await registrarAuditoria("UPDATE_EMPLOYEE","Modific\xf3 legajo: ".concat(e9.fileNumber," - ").concat(e9.lastName));else{if(el.some(e=>e.dni===e9.dni))return q("Ya existe un empleado con este DNI","error");await (0,n.ET)((0,n.hJ)(i.db,"empleados"),e),await registrarAuditoria("CREATE_EMPLOYEE","Cre\xf3 legajo: ".concat(e9.fileNumber," - ").concat(e9.lastName))}q("Empleado guardado correctamente","success"),await loadData(),ea("list"),es(null)}catch(e){console.error(e),q("Error al guardar","error")}},handleGeocode=async()=>{if(!e9.address)return q("Ingrese una direcci\xf3n primero","warning");ac(!0);try{let e=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(e9.address+", Argentina"),"&limit=1")),a=await e.json();a&&a.length>0?(ae({...e9,lat:a[0].lat,lng:a[0].lon}),q("Ubicaci\xf3n encontrada y guardada","success")):q("No se encontraron coordenadas","error")}catch(e){console.error(e),q("Error conectando servicio de mapas","error")}finally{ac(!1)}},handleDelete=async e=>{let a=el.find(a=>a.id===e);confirm("?")&&(await (0,n.oe)((0,n.JU)(i.db,"empleados",e)),await registrarAuditoria("DELETE_EMPLOYEE","Elimin\xf3 legajo: ".concat(null==a?void 0:a.fileNumber," - ").concat(null==a?void 0:a.lastName)),loadData(),es(null))},handleDeleteAll=async()=>{if(confirm("BORRAR TODO?")){ai(!0);try{for(let e of el)e.id&&await (0,n.oe)((0,n.JU)(i.db,"empleados",e.id));await registrarAuditoria("DELETE_ALL","Eliminaci\xf3n masiva"),q("Eliminados.","success"),loadData()}catch(e){console.error(e)}finally{ai(!1)}}},handleSaveHoliday=async()=>{eT.name&&(await o.add(eT),await registrarAuditoria("CREATE_HOLIDAY","Feriado: ".concat(eT.name)),eH({date:"",name:"",type:"Nacional"}),loadHolidays())},handleDeleteHoliday=async e=>{await o.delete(e),await registrarAuditoria("DELETE_HOLIDAY","Feriado ID: ".concat(e)),loadHolidays()},handleSyncHolidays=async()=>{e_(!0);try{await o.syncWithGovApi(eR),q("Sync OK","success"),loadHolidays()}catch(e){q("Error","error")}finally{e_(!1)}},removeCategory=e=>{let a=[...eV.categories];a.splice(e,1),eK({...eV,categories:a})},handleSaveAgreement=async()=>{eV.name&&(eB&&eV.id?await c.update(eV.id,eV):await c.add(eV),eK(eJ),eW(!1),loadAgreements())},handleEditAgreement=e=>{eK(e),eW(!0)},handleDeleteAgreement=async e=>{confirm("?")&&(await c.delete(e),loadAgreements())},handleOpenAbsenceModal=e=>{e?(eM(e),eP(!0)):(eM(eO),eP(!1)),eI(!0)},handleDeleteAbsence=async e=>{confirm("\xbfEliminar?")&&(await d.delete(e),await eliminarReplicasPlanificador(e),await registrarAuditoria("DELETE_ABSENCE","Elimin\xf3 novedad"),loadAbsences())},getAbsenceEmployeeName=e=>{if(e.employeeName)return e.employeeName;let a=el.find(a=>a.id===e.employeeId);return a?"".concat(a.lastName,", ").concat(a.firstName):"Desconocido"},confirmImport=async()=>{e5(!0);try{let e=0;for(let a of e1){let t=el.find(e=>e.dni===a.dni||a.fileNumber&&e.fileNumber===a.fileNumber);t&&t.id?await (0,n.r7)((0,n.JU)(i.db,"empleados",t.id),a):await (0,n.ET)((0,n.hJ)(i.db,"empleados"),a),e++}await registrarAuditoria("IMPORT_EMPLOYEES","Importados ".concat(e," registros v\xeda CSV")),alert("Se procesaron ".concat(e," registros correctamente.")),eX(!1),e4([]),eQ(""),e2(""),loadData()}catch(e){console.error(e),alert("Error importando")}finally{e5(!1)}};return(0,s.jsxs)(r.Z,{children:[(0,s.jsxs)("div",{className:"max-w-full mx-auto space-y-6 animate-in fade-in h-[calc(100vh-100px)] flex flex-col print:hidden",children:[(0,s.jsxs)("header",{className:"flex flex-col gap-4 shrink-0 p-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-black text-slate-900 dark:text-white uppercase",children:"Gesti\xf3n RRHH"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm font-medium",children:"Personal, Novedades y Reglas."}),(0,s.jsxs)("p",{className:"text-[10px] text-indigo-500 mt-1",children:["Usuario Activo: ",(0,s.jsx)("b",{children:B})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:["legajos"===$&&"list"===ee&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>window.print(),className:"bg-slate-700 text-white px-4 py-3 rounded-xl font-black text-xs uppercase shadow-lg flex gap-2 hover:bg-slate-800 transition-colors",children:[(0,s.jsx)(h.Z,{size:16})," Imprimir PDF"]}),(0,s.jsxs)("button",{onClick:()=>{let e=["Legajo;Apellido;Nombre;DNI;CUIL;Email;Tel\xe9fono;Convenio;Categor\xeda;Objetivo Preferido;Estado"];el.forEach(a=>{var t;let s=(null===(t=ef.find(e=>e.id===a.preferredObjectiveId))||void 0===t?void 0:t.name)||"",l=[a.fileNumber,'"'.concat(a.lastName,'"'),'"'.concat(a.firstName,'"'),a.dni,a.cuil,a.email,a.phone,'"'.concat(a.laborAgreement,'"'),'"'.concat(a.category,'"'),'"'.concat(s,'"'),a.status];e.push(l.join(";"))});let a=new Blob([e.join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.setAttribute("download","empleados_".concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"bg-emerald-600 text-white px-4 py-3 rounded-xl font-black text-xs uppercase shadow-lg flex gap-2 hover:bg-emerald-700 transition-colors",children:[(0,s.jsx)(u,{size:16})," Exportar"]}),(0,s.jsxs)("button",{onClick:()=>eX(!0),className:"bg-slate-800 text-white px-4 py-3 rounded-xl font-black text-xs uppercase shadow-lg flex gap-2 hover:bg-slate-700 transition-colors",children:[(0,s.jsx)(b,{size:16})," Importar"]}),(0,s.jsxs)("button",{onClick:()=>{ae(e7),al(!1),ea("form"),es(null),e8("PERSONAL")},className:"bg-indigo-600 text-white px-4 py-3 rounded-xl font-black text-xs uppercase shadow-lg flex gap-2 hover:bg-indigo-700 transition-colors",children:[(0,s.jsx)(g.Z,{size:16})," Nuevo"]})]}),"ausencias"===$&&(0,s.jsxs)("button",{onClick:()=>handleOpenAbsenceModal(),className:"bg-rose-600 text-white px-6 py-3 rounded-xl font-black text-xs uppercase shadow-lg flex gap-2",children:[(0,s.jsx)(g.Z,{size:16})," Nueva Novedad"]})]})]}),(0,s.jsx)("div",{className:"flex gap-2 border-b dark:border-slate-700",children:["legajos","ausencias","feriados","convenios"].map(e=>(0,s.jsx)("button",{onClick:()=>{Q(e),ea("list")},className:"px-6 py-3 font-black text-xs uppercase border-b-4 transition-all ".concat($===e?"legajos"===e?"border-indigo-600 text-indigo-600":"ausencias"===e?"border-rose-500 text-rose-500":"feriados"===e?"border-emerald-500 text-emerald-500":"border-amber-500 text-amber-500":"border-transparent text-slate-400 hover:text-slate-600"),children:e},e))})]}),"legajos"===$&&"list"===ee&&(0,s.jsxs)("div",{className:"flex-1 flex gap-6 overflow-hidden relative",children:[(0,s.jsxs)("div",{className:"w-[400px] bg-white dark:bg-slate-800 rounded-[2rem] border dark:border-slate-700 shadow-sm flex flex-col overflow-hidden shrink-0",children:[(0,s.jsxs)("div",{className:"p-4 border-b dark:border-slate-700 flex flex-col gap-4 bg-slate-50/50 dark:bg-slate-800/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-900 px-4 py-2 rounded-xl border dark:border-slate-700",children:[(0,s.jsx)(f.Z,{size:16,className:"text-slate-400"}),(0,s.jsx)("input",{placeholder:"Buscar...",className:"bg-transparent outline-none w-full text-sm font-bold text-slate-900 dark:text-white",value:ed,onChange:e=>eo(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-900 px-2 py-1 rounded-xl border dark:border-slate-700",children:[(0,s.jsx)("button",{onClick:()=>changeMonth(-1),className:"p-1 hover:bg-slate-100 rounded-lg",children:(0,s.jsx)(j.Z,{size:14})}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase w-20 text-center",children:Y.toLocaleString("es-ES",{month:"short",year:"2-digit"})}),(0,s.jsx)("button",{onClick:()=>changeMonth(1),className:"p-1 hover:bg-slate-100 rounded-lg",children:(0,s.jsx)(v.Z,{size:14})})]}),el.length>0&&(0,s.jsx)("button",{onClick:handleDeleteAll,disabled:ar,className:"text-rose-500 hover:bg-rose-50 px-3 py-1 rounded-lg text-[10px] font-black uppercase transition-colors",children:ar?"...":"Borrar Todo"})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto custom-scrollbar",children:(0,s.jsxs)("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[ei.map(e=>{var a;return(0,s.jsx)("div",{onClick:()=>handleRowClick(e),className:"p-4 cursor-pointer transition-colors border-l-4 ".concat((null==et?void 0:et.id)===e.id?"bg-indigo-50 dark:bg-indigo-900/20 border-l-indigo-500":"hover:bg-slate-50 dark:hover:bg-slate-700/50 border-l-transparent"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-black text-xs shadow-sm ".concat((null==et?void 0:et.id)===e.id?"bg-indigo-600 text-white":"bg-slate-100 text-slate-500"),children:null===(a=e.lastName)||void 0===a?void 0:a[0]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"font-bold text-sm uppercase truncate ".concat((null==et?void 0:et.id)===e.id?"text-indigo-700 dark:text-indigo-300":"text-slate-900 dark:text-white"),children:[e.lastName,", ",e.firstName]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsx)("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-slate-500 font-mono",children:e.fileNumber||"S/L"}),(0,s.jsx)("span",{className:"text-[10px] text-slate-400 truncate",children:e.category})]})]}),(0,s.jsx)(v.Z,{size:16,className:"text-slate-300 ".concat((null==et?void 0:et.id)===e.id?"text-indigo-400":"")})]})},e.id)}),0===ei.length&&(0,s.jsx)("div",{className:"p-8 text-center text-slate-400 text-xs font-medium",children:"No se encontraron empleados."})]})})]}),(0,s.jsx)("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-[2rem] border dark:border-slate-700 shadow-sm flex flex-col overflow-hidden relative",children:et?(0,s.jsxs)("div",{className:"h-full flex flex-col animate-in fade-in",children:[(0,s.jsxs)("div",{className:"p-6 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900 flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-indigo-600 flex items-center justify-center text-3xl font-black text-white shadow-lg shadow-indigo-500/30",children:null===(e=et.lastName)||void 0===e?void 0:e[0]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-black uppercase text-slate-900 dark:text-white",children:[et.lastName,", ",et.firstName]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-sm font-bold text-slate-500",children:[(0,s.jsx)("span",{className:"bg-white dark:bg-slate-800 px-2 py-1 rounded border dark:border-slate-700",children:et.laborAgreement}),(0,s.jsx)("span",{className:"text-slate-300",children:"|"}),(0,s.jsx)("span",{children:et.cuil})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>handleDelete(et.id),className:"p-2 text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",children:(0,s.jsx)(N.Z,{size:20})}),(0,s.jsx)("button",{onClick:()=>es(null),className:"p-2 text-slate-400 hover:bg-slate-200 rounded-lg transition-colors",children:(0,s.jsx)(y.Z,{size:20})})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 border rounded-xl",children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Objetivo Preferido"}),(0,s.jsx)("p",{className:"font-bold",children:(null===(a=ef.find(e=>e.id===et.preferredObjectiveId))||void 0===a?void 0:a.name)||(et.preferredObjectiveId?"ID: ".concat(et.preferredObjectiveId):"Sin asignar")})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-xl",children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Contacto"}),(0,s.jsx)("p",{className:"font-bold",children:et.phone||"-"})]}),(0,s.jsxs)("div",{className:"col-span-2 p-4 border rounded-xl flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Direcci\xf3n"}),(0,s.jsx)("p",{className:"font-bold",children:et.address||"Sin direcci\xf3n"})]}),et.lat&&et.lng?(0,s.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(et.lat,",").concat(et.lng),target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-indigo-600 font-bold text-xs bg-indigo-50 px-4 py-2 rounded-lg hover:bg-indigo-100 transition-colors",children:[(0,s.jsx)(k.Z,{size:16})," Ver Ubicaci\xf3n"]}):(0,s.jsx)("span",{className:"text-xs text-slate-300 italic",children:"No geolocalizado"})]})]}),ec?(0,s.jsxs)("div",{className:"space-y-4 max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-slate-900 text-white p-6 rounded-3xl shadow-lg relative overflow-hidden ".concat(ec.isOverLimit?"ring-4 ring-rose-500":""),children:[ec.isOverLimit&&(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full bg-rose-600 text-white text-[10px] font-black uppercase text-center py-1 animate-pulse",children:"\xa1L\xedmite Mensual Excedido!"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:(0,s.jsx)(w,{size:64})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-8 relative z-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[10px] font-black uppercase text-indigo-200 mb-1",children:"Total Planificado"}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsxs)("span",{className:"text-5xl font-black",children:[ec.totalPlanificado,"h"]}),(0,s.jsxs)("span",{className:"text-sm font-medium text-slate-400",children:["/ ",ec.monthlyLimit,"h"]})]}),(0,s.jsx)("div",{className:"w-full h-2 bg-slate-800 rounded-full mt-4",children:(0,s.jsx)("div",{className:"h-full rounded-full ".concat(ec.isOverLimit?"bg-rose-500":"bg-emerald-400"),style:{width:"".concat(Math.min(ec.progress,100),"%")}})})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-center gap-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-xl",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-slate-300",children:"Realizado"}),(0,s.jsxs)("span",{className:"font-black text-xl",children:[ec.totalRealizado,"h"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-xl",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-slate-300",children:"Objetivos"}),(0,s.jsx)("span",{className:"font-black text-xl",children:ec.shiftsCount})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-emerald-50 p-5 rounded-2xl border border-emerald-100 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-emerald-700 font-bold text-sm",children:"Francos"}),(0,s.jsx)("p",{className:"text-2xl font-black text-emerald-800",children:ec.francosCount})]}),(0,s.jsx)(C,{size:24,className:"text-emerald-300"})]}),(0,s.jsxs)("div",{className:"bg-teal-50 p-5 rounded-2xl border border-teal-100 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-teal-700 font-bold text-sm",children:"Vacaciones"}),(0,s.jsx)("p",{className:"text-2xl font-black text-teal-800",children:ec.vacationsCount||0})]}),(0,s.jsx)(S.Z,{size:24,className:"text-teal-300"})]}),(0,s.jsxs)("div",{className:"bg-purple-50 p-5 rounded-2xl border border-purple-100 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-700 font-bold text-sm",children:"Licencias"}),(0,s.jsx)("p",{className:"text-2xl font-black text-purple-800",children:ec.licensesCount||0})]}),(0,s.jsx)(D.Z,{size:24,className:"text-purple-300"})]}),(0,s.jsxs)("div",{className:"bg-rose-50 p-5 rounded-2xl border border-rose-100 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-rose-700 font-bold text-sm",children:"Ausencias"}),(0,s.jsx)("p",{className:"text-2xl font-black text-rose-800",children:ec.absencesCount})]}),(0,s.jsx)(A.Z,{size:24,className:"text-rose-300"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,s.jsxs)("div",{className:"bg-slate-50 p-4 rounded-xl border text-center",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase font-black text-slate-400",children:"Diurnas"}),(0,s.jsxs)("p",{className:"text-xl font-black",children:[ec.dayHours,"h"]})]}),(0,s.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 text-center",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase font-black text-indigo-400",children:"Nocturnas"}),(0,s.jsxs)("p",{className:"text-xl font-black text-indigo-700",children:[ec.nightHours,"h"]})]}),(0,s.jsxs)("div",{className:"bg-emerald-50 p-4 rounded-xl border border-emerald-100 text-center",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase font-black text-emerald-600",children:"Extra 50%"}),(0,s.jsxs)("p",{className:"text-xl font-black text-emerald-700",children:[ec.extra50,"h"]})]}),(0,s.jsxs)("div",{className:"bg-rose-50 p-4 rounded-xl border border-rose-100 text-center",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase font-black text-rose-600",children:"Extra 100%"}),(0,s.jsxs)("p",{className:"text-xl font-black text-rose-700",children:[ec.extra100,"h"]})]}),(0,s.jsxs)("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-100 text-center",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase font-black text-amber-600",children:"Plus Feriado"}),(0,s.jsxs)("p",{className:"text-xl font-black text-amber-700",children:[ec.plusFeriado||0,"h"]})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-2xl border dark:border-slate-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-4 py-3 bg-slate-100 dark:bg-slate-950 border-b dark:border-slate-700 text-xs font-black uppercase text-slate-500",children:"Desglose por Objetivo"}),ec.objectives.map((e,a)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b dark:border-slate-700/50 last:border-0 hover:bg-white dark:hover:bg-slate-800 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),(0,s.jsx)("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 uppercase",children:e.name})]}),(0,s.jsxs)("span",{className:"text-sm font-black text-slate-900 dark:text-white bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded",children:[Math.round(e.hours),"h"]})]},a)),0===ec.objectives.length&&(0,s.jsx)("div",{className:"p-4 text-center text-slate-400 text-xs",children:"Sin asignaciones este mes."})]})]}):(0,s.jsx)("div",{className:"flex h-40 items-center justify-center text-slate-400 font-bold animate-pulse",children:"Calculando m\xe9tricas..."})]}),(0,s.jsx)("div",{className:"p-6 border-t dark:border-slate-700 bg-white dark:bg-slate-800",children:(0,s.jsxs)("button",{onClick:()=>{et&&(ae(et),al(!0),ea("form"),es(null),e8("PERSONAL"))},className:"w-full py-4 bg-slate-900 dark:bg-white dark:text-slate-900 text-white rounded-xl font-black uppercase text-sm hover:scale-[1.02] transition-transform shadow-xl flex items-center justify-center gap-2",children:[(0,s.jsx)(E.Z,{size:18})," Editar Datos del Legajo"]})})]}):(0,s.jsxs)("div",{className:"h-full flex flex-col p-8 animate-in fade-in",children:[(0,s.jsxs)("h2",{className:"text-2xl font-black text-slate-800 dark:text-white mb-6 uppercase flex items-center gap-3",children:[(0,s.jsx)(S.Z,{className:"text-indigo-500"})," Resumen Global RRHH"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-indigo-600 text-white p-6 rounded-3xl shadow-xl shadow-indigo-500/20",children:[(0,s.jsx)("p",{className:"text-xs font-black uppercase text-indigo-200 mb-2",children:"Total N\xf3mina"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(L.Z,{size:40,className:"text-indigo-300"}),(0,s.jsx)("span",{className:"text-5xl font-black",children:ep.totalEmployees})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-900 border p-6 rounded-3xl shadow-sm",children:[(0,s.jsx)("p",{className:"text-xs font-black uppercase text-rose-500 mb-2",children:"Novedades Activas"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(I.Z,{size:40,className:"text-rose-200"}),(0,s.jsx)("span",{className:"text-5xl font-black text-rose-600",children:ep.activeAbsences})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl border text-center",children:[(0,s.jsx)(O.Z,{className:"mx-auto mb-2 text-slate-400"}),(0,s.jsx)("p",{className:"text-2xl font-black text-slate-700 dark:text-white",children:ep.nextHolidays}),(0,s.jsx)("p",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Pr\xf3ximos Feriados"})]}),(0,s.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl border text-center",children:[(0,s.jsx)(D.Z,{className:"mx-auto mb-2 text-slate-400"}),(0,s.jsx)("p",{className:"text-2xl font-black text-slate-700 dark:text-white",children:ev.length}),(0,s.jsx)("p",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Convenios Activos"})]}),(0,s.jsxs)("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl border text-center",children:[(0,s.jsx)(Z.Z,{className:"mx-auto mb-2 text-slate-400"}),(0,s.jsx)("p",{className:"text-2xl font-black text-slate-700 dark:text-white",children:eb.length}),(0,s.jsx)("p",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Clientes Activos"})]})]}),(0,s.jsx)("div",{className:"mt-auto pt-8 text-center text-slate-300 text-sm font-medium",children:"Seleccione un empleado del listado lateral para ver su detalle individual."})]})})]}),"legajos"===$&&"form"===ee&&(0,s.jsxs)("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-[2rem] border dark:border-slate-700 shadow-sm p-8 animate-in slide-in-from-right-10 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>ea("list"),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:(0,s.jsx)(M,{})}),(0,s.jsx)("h2",{className:"text-2xl font-black uppercase dark:text-white",children:as?"Editar: ".concat(e9.lastName):"Nuevo Legajo"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:["PERSONAL","LABORAL","TALLES"].map(e=>(0,s.jsx)("button",{onClick:()=>e8(e),className:"px-4 py-2 rounded-lg text-xs font-black uppercase transition-all ".concat(e6===e?"bg-indigo-600 text-white shadow-lg":"bg-slate-100 text-slate-400"),children:e},e))})]}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:["PERSONAL"===e6&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Nombre"}),(0,s.jsx)("input",{className:ax,value:e9.firstName||"",onChange:e=>ae({...e9,firstName:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Apellido"}),(0,s.jsx)("input",{className:ax,value:e9.lastName||"",onChange:e=>ae({...e9,lastName:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"DNI"}),(0,s.jsx)("input",{className:ax,value:e9.dni||"",onChange:e=>ae({...e9,dni:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"CUIL"}),(0,s.jsx)("input",{className:ax,value:e9.cuil||"",onChange:e=>ae({...e9,cuil:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Email"}),(0,s.jsx)("input",{className:ax,value:e9.email||"",onChange:e=>ae({...e9,email:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Tel\xe9fono"}),(0,s.jsx)("input",{className:ax,value:e9.phone||"",onChange:e=>ae({...e9,phone:e.target.value})})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:ah,children:"Direcci\xf3n"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{className:ax,value:e9.address||"",onChange:e=>ae({...e9,address:e.target.value}),placeholder:"Calle, N\xfamero, Localidad"}),(0,s.jsx)("button",{onClick:handleGeocode,disabled:ao,className:"px-4 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-xl font-bold uppercase text-xs flex items-center gap-2 transition-colors",children:ao?"...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{size:16})," Geolocalizar"]})})]}),(0,s.jsx)("p",{className:"text-[10px] text-slate-400 mt-1 ml-1",children:e9.lat?"Ubicaci\xf3n guardada: ".concat(e9.lat,", ").concat(e9.lng):"Sin coordenadas"})]})]}),"LABORAL"===e6&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Legajo N\xba"}),(0,s.jsx)("input",{className:ax,value:e9.fileNumber||"",onChange:e=>ae({...e9,fileNumber:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Fecha Ingreso"}),(0,s.jsx)("input",{type:"date",className:ax,value:e9.startDate||"",onChange:e=>ae({...e9,startDate:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Convenio"}),(0,s.jsxs)("select",{className:am,value:e9.laborAgreement||"",onChange:e=>ae({...e9,laborAgreement:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Seleccionar..."}),ev.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Categor\xeda"}),(0,s.jsxs)("select",{className:am,value:e9.category||"",onChange:e=>ae({...e9,category:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Seleccionar..."}),aa.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Objetivo Preferido"}),(0,s.jsxs)("select",{className:am,value:e9.preferredObjectiveId||"",onChange:e=>ae({...e9,preferredObjectiveId:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Ninguno"}),ef.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Inicio Ciclo Liquidaci\xf3n (D\xeda)"}),(0,s.jsx)("input",{type:"number",min:"1",max:"31",className:ax,value:e9.cycleStartDay||26,onChange:e=>ae({...e9,cycleStartDay:parseInt(e.target.value)}),placeholder:"Ej: 26"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Estado"}),(0,s.jsxs)("select",{className:am,value:e9.status||"activo",onChange:e=>ae({...e9,status:e.target.value}),children:[(0,s.jsx)("option",{value:"activo",children:"Activo"}),(0,s.jsx)("option",{value:"inactivo",children:"Inactivo"})]})]})]}),"TALLES"===e6&&(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Camisa/Remera"}),(0,s.jsx)("input",{className:ax,value:(null===(t=e9.sizes)||void 0===t?void 0:t.shirt)||"",onChange:e=>ae({...e9,sizes:{...e9.sizes,shirt:e.target.value}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Pantal\xf3n"}),(0,s.jsx)("input",{className:ax,value:(null===(p=e9.sizes)||void 0===p?void 0:p.pants)||"",onChange:e=>ae({...e9,sizes:{...e9.sizes,pants:e.target.value}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Calzado"}),(0,s.jsx)("input",{className:ax,value:(null===(_=e9.sizes)||void 0===_?void 0:_.shoes)||"",onChange:e=>ae({...e9,sizes:{...e9.sizes,shoes:e.target.value}})})]})]}),(0,s.jsxs)("div",{className:"pt-8 border-t dark:border-slate-700 flex justify-end gap-4",children:[(0,s.jsx)("button",{onClick:()=>ea("list"),className:"px-6 py-3 bg-slate-100 text-slate-500 rounded-xl font-bold uppercase text-xs",children:"Cancelar"}),(0,s.jsx)("button",{onClick:handleSave,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs shadow-lg hover:bg-indigo-700 transition-transform hover:scale-105",children:"Guardar Cambios"})]})]})]}),"feriados"===$&&(0,s.jsxs)("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-1/3 bg-white dark:bg-slate-800 rounded-[2rem] border dark:border-slate-700 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-black text-slate-900 dark:text-white uppercase mb-4",children:"Gesti\xf3n Feriados"}),(0,s.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800 mb-6",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-indigo-600 mb-2 block",children:"Importar Oficiales"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{className:am,value:eR,onChange:e=>eF(parseInt(e.target.value)),children:[(0,s.jsx)("option",{value:2024,children:"2024"}),(0,s.jsx)("option",{value:2025,children:"2025"}),(0,s.jsx)("option",{value:2026,children:"2026"})]}),(0,s.jsx)("button",{onClick:handleSyncHolidays,disabled:eU,className:"flex-1 bg-indigo-600 text-white rounded-xl text-[10px] font-black uppercase flex items-center justify-center gap-2 hover:bg-indigo-700 transition-colors",children:eU?"...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Z,{size:14})," Sincronizar"]})})]})]}),(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t dark:border-slate-700",children:[(0,s.jsx)("p",{className:"text-[10px] font-black uppercase text-slate-400",children:"Carga Manual"}),(0,s.jsx)("input",{className:ax,value:eT.name,onChange:e=>eH({...eT,name:e.target.value}),placeholder:"Nombre del Feriado"}),(0,s.jsx)("input",{type:"date",className:ax,value:eT.date,onChange:e=>eH({...eT,date:e.target.value})}),(0,s.jsx)("button",{onClick:handleSaveHoliday,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-black uppercase text-xs",children:"Guardar Manual"})]})]}),(0,s.jsx)("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-[2rem] border dark:border-slate-700 p-6 overflow-auto custom-scrollbar",children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3",children:eA.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-900 rounded-xl border dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(O.Z,{size:20,className:"text-indigo-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-black dark:text-white uppercase",children:e.name}),(0,s.jsx)("p",{className:"text-xs font-mono text-slate-500",children:new Date(e.date+"T00:00:00").toLocaleDateString()})]})]}),(0,s.jsx)("button",{onClick:()=>handleDeleteHoliday(e.id),className:"text-slate-400 hover:text-rose-500",children:(0,s.jsx)(y.Z,{size:20})})]},e.id))})})]}),"convenios"===$&&(0,s.jsxs)("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-1/3 bg-white dark:bg-slate-800 rounded-[2rem] border dark:border-slate-700 p-6 overflow-y-auto",children:[(0,s.jsxs)("h3",{className:"text-lg font-black text-slate-900 dark:text-white uppercase mb-4 flex items-center gap-2",children:[eB?(0,s.jsx)(E.Z,{size:18}):(0,s.jsx)(P,{size:18})," ",eB?"Editar":"Nuevo"," Convenio"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Nombre"}),(0,s.jsx)("input",{className:ax,value:eV.name,onChange:e=>eK({...eV,name:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Semanal (hs)"}),(0,s.jsx)("input",{type:"number",className:ax,value:eV.maxHoursWeekly,onChange:e=>eK({...eV,maxHoursWeekly:parseInt(e.target.value)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:ah,children:"Mensual (hs)"}),(0,s.jsx)("input",{type:"number",className:ax,value:eV.maxHoursMonthly,onChange:e=>eK({...eV,maxHoursMonthly:parseInt(e.target.value)})})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-xl border dark:border-slate-700",children:[(0,s.jsx)("label",{className:ah,children:"S\xe1bados > 13hs"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>eK({...eV,saturdayRate:0}),className:"flex-1 py-2 rounded-lg text-[10px] font-black ".concat(0===eV.saturdayRate?"bg-indigo-600 text-white":"bg-white dark:bg-slate-800 text-slate-400"),children:"NORMAL"}),(0,s.jsx)("button",{onClick:()=>eK({...eV,saturdayRate:50}),className:"flex-1 py-2 rounded-lg text-[10px] font-black ".concat(50===eV.saturdayRate?"bg-emerald-500 text-white":"bg-white dark:bg-slate-800 text-slate-400"),children:"50%"}),(0,s.jsx)("button",{onClick:()=>eK({...eV,saturdayRate:100}),className:"flex-1 py-2 rounded-lg text-[10px] font-black ".concat(100===eV.saturdayRate?"bg-rose-500 text-white":"bg-white dark:bg-slate-800 text-slate-400"),children:"100%"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eV.paysDoubleOnFranco,onChange:e=>eK({...eV,paysDoubleOnFranco:e.target.checked})}),(0,s.jsx)("span",{className:"text-xs font-bold dark:text-white",children:"Paga Franco Trabajado 100%"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eV.holidayIsPlus,onChange:e=>eK({...eV,holidayIsPlus:e.target.checked})}),(0,s.jsx)("span",{className:"text-xs font-bold dark:text-white text-emerald-600",children:"Feriados se pagan como PLUS"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eV.sundayIs100,onChange:e=>eK({...eV,sundayIs100:e.target.checked})}),(0,s.jsx)("span",{className:"text-xs font-bold dark:text-white",children:"Domingos al 100%"})]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-xl border dark:border-slate-700",children:[(0,s.jsx)("label",{className:ah,children:"Categor\xedas"}),(0,s.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,s.jsx)("input",{className:"flex-1 p-2 bg-white dark:bg-slate-800 rounded-lg text-xs text-slate-900 dark:text-white",value:eG,onChange:e=>eq(e.target.value),placeholder:"Ej: Vigilador"}),(0,s.jsx)("button",{onClick:()=>{eG.trim()&&(eK({...eV,categories:[...eV.categories,eG.trim()]}),eq(""))},className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg",children:(0,s.jsx)(g.Z,{size:14})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:eV.categories.map((e,a)=>(0,s.jsxs)("span",{className:"px-2 py-1 bg-white dark:bg-slate-800 rounded-lg text-[10px] font-bold border dark:border-slate-600 flex items-center gap-1",children:[e," ",(0,s.jsx)("button",{onClick:()=>removeCategory(a),className:"text-rose-500",children:(0,s.jsx)(y.Z,{size:10})})]},a))})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[eB&&(0,s.jsx)("button",{onClick:()=>{eW(!1),eK(eJ)},className:"px-4 py-3 bg-slate-100 text-slate-500 rounded-xl font-bold text-xs uppercase",children:"Cancelar"}),(0,s.jsx)("button",{onClick:handleSaveAgreement,className:"flex-1 bg-amber-500 text-white py-3 rounded-xl font-black uppercase text-xs",children:"Guardar"})]})]})]}),(0,s.jsx)("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-[2rem] border dark:border-slate-700 p-6 overflow-auto custom-scrollbar",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ev.map(e=>(0,s.jsxs)("div",{className:"p-5 bg-slate-50 dark:bg-slate-900 rounded-[2rem] border dark:border-slate-700 relative group",children:[(0,s.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:()=>handleEditAgreement(e),className:"text-slate-300 hover:text-indigo-500",children:(0,s.jsx)(E.Z,{size:18})}),(0,s.jsx)("button",{onClick:()=>handleDeleteAgreement(e.id),className:"text-slate-300 hover:text-rose-500",children:(0,s.jsx)(N.Z,{size:18})})]}),(0,s.jsx)("h3",{className:"font-black text-slate-800 dark:text-white uppercase mb-2",children:e.name}),(0,s.jsxs)("div",{className:"space-y-1 text-xs text-slate-500",children:[(0,s.jsxs)("p",{children:["Semanal: ",e.maxHoursWeekly,"hs | Mensual: ",e.maxHoursMonthly,"hs"]}),(0,s.jsxs)("p",{children:["S\xe1bado > 13hs: ",(0,s.jsx)("span",{className:"font-bold text-indigo-500",children:0===e.saturdayRate?"Normal":e.saturdayRate+"%"})]}),(0,s.jsxs)("p",{className:"flex gap-2 mt-2",children:[e.holidayIsPlus&&(0,s.jsx)("span",{className:"bg-emerald-100 text-emerald-700 px-2 rounded-full text-[9px] font-bold",children:"Feriado PLUS"}),e.paysDoubleOnFranco&&(0,s.jsx)("span",{className:"bg-indigo-100 text-indigo-700 px-2 rounded-full text-[9px] font-bold",children:"Franco 100%"})]})]})]},e.id))})})]}),"ausencias"===$&&(0,s.jsxs)("div",{className:"flex-1 bg-white dark:bg-slate-800 rounded-[2rem] border dark:border-slate-700 p-6 overflow-hidden flex flex-col",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-900 px-4 py-2 rounded-xl border dark:border-slate-700 max-w-md w-full",children:[(0,s.jsx)(f.Z,{size:16,className:"text-slate-400"}),(0,s.jsx)("input",{placeholder:"Buscar novedad...",className:"bg-transparent outline-none w-full text-sm font-bold text-slate-900 dark:text-white",value:eS,onChange:e=>eD(e.target.value)})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-auto custom-scrollbar",children:(0,s.jsxs)("table",{className:"w-full text-left",children:[(0,s.jsx)("thead",{className:"bg-slate-50 dark:bg-slate-900 sticky top-0",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400",children:"Empleado"}),(0,s.jsx)("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400",children:"Tipo / Motivo"}),(0,s.jsx)("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400",children:"Periodo"}),(0,s.jsx)("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400 text-center",children:"Estado"}),(0,s.jsx)("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400 text-center",children:"Certificado"}),(0,s.jsx)("th",{className:"p-4 text-right"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:ew.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[(0,s.jsx)("td",{className:"p-4 font-bold text-sm text-slate-900 dark:text-white uppercase",children:getAbsenceEmployeeName(e)}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-xs font-bold uppercase",children:e.type}),(0,s.jsx)("span",{className:"text-[10px] text-slate-500",children:e.reason||"-"})]})}),(0,s.jsxs)("td",{className:"p-4 text-xs font-mono text-slate-500",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),(0,s.jsx)("td",{className:"p-4 text-center",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-[10px] font-black uppercase ".concat("Justificada"===e.status?"bg-emerald-100 text-emerald-600":"Injustificada"===e.status?"bg-rose-100 text-rose-600":"bg-amber-100 text-amber-600"),children:e.status})}),(0,s.jsx)("td",{className:"p-4 text-center",children:e.hasCertificate?(0,s.jsx)("span",{className:"text-emerald-500 flex justify-center",children:(0,s.jsx)(T.Z,{size:16})}):(0,s.jsx)("span",{className:"text-slate-300",children:"-"})}),(0,s.jsxs)("td",{className:"p-4 text-right flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>handleOpenAbsenceModal(e),className:"text-slate-400 hover:text-indigo-500",children:(0,s.jsx)(E.Z,{size:16})}),(0,s.jsx)("button",{onClick:()=>handleDeleteAbsence(e.id),className:"text-slate-400 hover:text-rose-500",children:(0,s.jsx)(N.Z,{size:16})})]})]},e.id))})]})})]})]}),eY&&(0,s.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl w-full max-w-6xl shadow-2xl relative flex flex-col h-[90vh]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-2xl font-black text-slate-800 dark:text-white flex items-center gap-2",children:[(0,s.jsx)(b,{className:"text-emerald-500"})," Importaci\xf3n Masiva"]}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Carga empleados desde un archivo CSV o Excel exportado a CSV."})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{let e=new Blob(["\uFEFFLegajo;Apellido, Nombre;CUIL;Email;Telefono;Direccion;Categoria;Convenio;Estado;Fecha Ingreso;Periodo;Inicio Ciclo;Objetivo\n1020;PEREZ, Juan;20-12345678-9;juan@email.com;3511234567;Av Colon 1234;VIGILADOR;422/05;activo;01/01/2024;Mensual;26;Planta Industrial"],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.setAttribute("download","Plantilla_Nomina_CronoApp.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg text-xs font-black uppercase hover:bg-indigo-100 transition-colors flex items-center gap-2",children:[(0,s.jsx)(z.Z,{size:14})," Descargar Plantilla"]}),(0,s.jsx)("button",{onClick:()=>{eX(!1),e4([]),eQ("")},className:"p-2 hover:bg-slate-100 rounded-full",children:(0,s.jsx)(y.Z,{})})]})]}),e$?(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Vista Previa (",e1.length," registros v\xe1lidos)"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{try{let e=parseCSV(e$);if(0===e.length){alert("Archivo vac\xedo o formato desconocido.");return}let a=e.map(e=>{let a=Object.keys(e),findKey=e=>a.find(a=>e.some(e=>a.toLowerCase().includes(e))),t=a.find(e=>e.toLowerCase().includes("apellido")&&e.toLowerCase().includes("nombre")),s=findKey(["legajo","nro","ficha"]),l=findKey(["dni","doc","documento","cuil","cuit"]),r=findKey(["cat","puesto","cargo"]),i=findKey(["convenio","cct"]),n=findKey(["objetivo","cliente","servicio"]),d=findKey(["fecha","ingreso","alta"]),o=findKey(["email","correo"]),c=findKey(["tel","cel","movil"]),x=findKey(["dir","domicilio","calle"]),m=findKey(["estado"]),h=findKey(["periodo"]),p=findKey(["ciclo","inicio"]),u="Sin Nombre",b="Sin Apellido";if(t&&e[t]){let a=e[t];if(a.includes(",")){let e=a.split(",");b=e[0].trim(),u=e.length>1?e[1].trim():"-"}else{let e=a.split(" ");b=e[0],u=e.slice(1).join(" ")}}else{let a=findKey(["apellido","lastname"]),t=findKey(["nombre","firstname"]);a&&t&&(b=e[a],u=e[t])}let g="",f="",j=e[l]||"";if(j){f=j.trim();let e=j.replace(/[^0-9]/g,"");11===e.length?g=e.substring(2,10):e.length>=7&&(g=e)}let v={firstName:u,lastName:b,dni:g,cuil:f,fileNumber:e[s]||"",category:r?e[r]:"",cct:i?e[i]:"",email:o?e[o]:"",phone:c?e[c]:"",address:x?e[x]:"",status:m&&e[m].toLowerCase().includes("inact")?"inactivo":"activo",laborAgreement:i?e[i]:"",startDate:d?parseDateString(e[d]):"",periodType:h?e[h]:"Mensual",cycleStartDay:p?e[p]:"26",preferredObjectiveId:"",objectiveName:n?e[n]:""};return createEmployeeObject(v,ef)}).filter(e=>e.dni&&e.dni.length>5);0===a.length?alert("No se encontraron registros v\xe1lidos (DNI/CUIL)."):e4(a)}catch(e){console.error(e),alert("Error: "+e.message)}},className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-white rounded-lg text-xs font-bold",children:"Re-Procesar"}),(0,s.jsx)("button",{onClick:()=>eQ(""),className:"px-4 py-2 text-rose-500 font-bold text-xs",children:"Cancelar"})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto border rounded-xl",children:(0,s.jsxs)("table",{className:"w-full text-xs text-left",children:[(0,s.jsx)("thead",{className:"bg-slate-100 dark:bg-slate-900 sticky top-0",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3",children:"Legajo"}),(0,s.jsx)("th",{className:"p-3",children:"Apellido, Nombre"}),(0,s.jsx)("th",{className:"p-3",children:"DNI / CUIL"}),(0,s.jsx)("th",{className:"p-3",children:"Convenio"}),(0,s.jsx)("th",{className:"p-3",children:"Cat."}),(0,s.jsx)("th",{className:"p-3",children:"Objetivo"}),(0,s.jsx)("th",{className:"p-3",children:"Contacto"}),(0,s.jsx)("th",{className:"p-3",children:"Direcci\xf3n"}),(0,s.jsx)("th",{className:"p-3",children:"Ingreso"}),(0,s.jsx)("th",{className:"p-3",children:"Ciclo"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:e1.map((e,a)=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800",children:[(0,s.jsx)("td",{className:"p-3 font-mono",children:e.fileNumber}),(0,s.jsx)("td",{className:"p-3 font-bold",children:e.name}),(0,s.jsx)("td",{className:"p-3",children:e.dni}),(0,s.jsx)("td",{className:"p-3",children:e.laborAgreement}),(0,s.jsx)("td",{className:"p-3",children:e.category}),(0,s.jsx)("td",{className:"p-3",children:e.preferredObjectiveId?(0,s.jsxs)("span",{className:"text-emerald-600 font-bold flex items-center gap-1",children:[(0,s.jsx)(R.Z,{size:10})," ",(null===(t=ef.find(a=>a.id===e.preferredObjectiveId))||void 0===t?void 0:t.name)||"ID OK"]}):(0,s.jsxs)("span",{className:"text-rose-400 italic",children:[e.objectiveName||"-"," (No enc.)"]})}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsxs)("div",{className:"flex flex-col text-[10px]",children:[e.email&&(0,s.jsx)("span",{className:"text-indigo-500",children:e.email}),e.phone&&(0,s.jsx)("span",{children:e.phone}),!e.email&&!e.phone&&(0,s.jsx)("span",{className:"text-slate-300",children:"-"})]})}),(0,s.jsx)("td",{className:"p-3 text-[10px] truncate max-w-[150px]",title:e.address,children:e.address||"-"}),(0,s.jsx)("td",{className:"p-3 font-mono",children:e.startDate||"-"}),(0,s.jsx)("td",{className:"p-3 font-mono",children:e.cycleStartDay})]},a)})})]})}),(0,s.jsx)("div",{className:"pt-6 mt-4 border-t flex justify-end",children:(0,s.jsx)("button",{onClick:confirmImport,disabled:e3||0===e1.length,className:"px-8 py-4 bg-emerald-600 text-white rounded-xl font-black text-sm shadow-xl hover:bg-emerald-700 transition-transform hover:scale-105 disabled:opacity-50 disabled:scale-100",children:e3?"Importando...":"Confirmar Importaci\xf3n (".concat(e1.length,")")})})]}):(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-900/50 p-10",children:[(0,s.jsx)(H,{size:64,className:"text-indigo-400 mb-4"}),(0,s.jsx)("p",{className:"font-bold text-slate-600 dark:text-slate-300 mb-2",children:"Arrastra tu archivo aqu\xed o haz clic para seleccionar"}),(0,s.jsx)("p",{className:"text-xs text-slate-400 mb-6",children:"Formato soportado: .csv (Excel: Guardar como > CSV delimitado por comas)"}),(0,s.jsx)("input",{type:"file",accept:".csv",className:"hidden",id:"csv-upload",onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!t)return;e2(t.name);let s=new FileReader;s.onload=e=>{var a;(null===(a=e.target)||void 0===a?void 0:a.result)&&eQ(e.target.result)},s.readAsText(t,"ISO-8859-1")}}),(0,s.jsx)("label",{htmlFor:"csv-upload",className:"bg-indigo-600 text-white px-8 py-3 rounded-xl font-black text-xs uppercase cursor-pointer hover:bg-indigo-700 shadow-lg transition-transform hover:scale-105",children:"Seleccionar Archivo"})]})]})}),(0,s.jsx)("div",{id:"printable-report",className:"hidden print:block bg-white p-8 w-full h-full absolute top-0 left-0 z-[9999]",children:et?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center border-b-2 border-black pb-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold uppercase",children:"Ficha de Liquidaci\xf3n"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Periodo: ",Y.toLocaleString("es-ES",{month:"long",year:"numeric"}).toUpperCase()]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("h2",{className:"text-xl font-black",children:"CRONOAPP"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Generado el: ",new Date().toLocaleDateString()]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6 border border-gray-300 p-4 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-xs uppercase block text-gray-500",children:"Empleado:"})," ",et.lastName,", ",et.firstName]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-xs uppercase block text-gray-500",children:"Legajo:"})," ",et.fileNumber]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-xs uppercase block text-gray-500",children:"CUIL:"})," ",et.cuil]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-xs uppercase block text-gray-500",children:"Convenio:"})," ",et.laborAgreement]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-xs uppercase block text-gray-500",children:"Categor\xeda:"})," ",et.category]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-xs uppercase block text-gray-500",children:"Ciclo:"})," D\xeda ",et.cycleStartDay," al ",et.cycleStartDay-1]})]}),ec&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"font-bold uppercase text-sm mb-2 border-b border-gray-200",children:"Resumen de Horas"}),(0,s.jsxs)("table",{className:"w-full text-sm text-left border border-gray-300",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-2 border",children:"Concepto"}),(0,s.jsx)("th",{className:"p-2 border text-right",children:"Cantidad"})]})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border",children:"Horas Normales (Diurnas)"}),(0,s.jsxs)("td",{className:"p-2 border text-right",children:[ec.dayHours," hs"]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border",children:"Horas Nocturnas"}),(0,s.jsxs)("td",{className:"p-2 border text-right",children:[ec.nightHours," hs"]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border",children:"Horas al 50% (Extras)"}),(0,s.jsxs)("td",{className:"p-2 border text-right",children:[ec.extra50," hs"]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border",children:"Horas al 100% (Franco Trab.)"}),(0,s.jsxs)("td",{className:"p-2 border text-right",children:[ec.extra100," hs"]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border",children:"Plus Feriado"}),(0,s.jsxs)("td",{className:"p-2 border text-right",children:[ec.plusFeriado||0," hs"]})]}),(0,s.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,s.jsx)("td",{className:"p-2 border",children:"TOTAL REALIZADO"}),(0,s.jsxs)("td",{className:"p-2 border text-right",children:[ec.totalRealizado," hs"]})]})]})]})]}),ec&&ec.objectives.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"font-bold uppercase text-sm mb-2 border-b border-gray-200",children:"Distribuci\xf3n por Objetivo"}),(0,s.jsxs)("table",{className:"w-full text-sm text-left border border-gray-300",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-2 border",children:"Objetivo / Cliente"}),(0,s.jsx)("th",{className:"p-2 border text-right",children:"Horas"})]})}),(0,s.jsx)("tbody",{children:ec.objectives.map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border",children:e.name}),(0,s.jsxs)("td",{className:"p-2 border text-right",children:[Math.round(e.hours)," hs"]})]},a))})]})]}),(0,s.jsxs)("div",{className:"mb-12",children:[(0,s.jsx)("h3",{className:"font-bold uppercase text-sm mb-2 border-b border-gray-200",children:"Novedades del Periodo"}),(0,s.jsxs)("div",{className:"border border-gray-300 p-4 min-h-[100px] text-sm",children:[(null==ec?void 0:ec.absencesCount)>0&&(0,s.jsxs)("p",{className:"mb-2",children:[(0,s.jsx)("strong",{children:"Ausencias:"})," ",ec.absencesCount," d\xedas."]}),null==ec?void 0:null===(V=ec.reportData)||void 0===V?void 0:null===(J=V.turnos)||void 0===J?void 0:J.filter(e=>e.extensionNote||e.entryNote).map((e,a)=>(0,s.jsxs)("p",{className:"mb-1 text-xs text-gray-600",children:[" ",new Date(1e3*e.startTime.seconds).toLocaleDateString(),": ",e.extensionNote||e.entryNote]},a)),!(null==ec?void 0:ec.absencesCount)&&!(null==ec?void 0:null===(G=ec.reportData)||void 0===G?void 0:null===(K=G.turnos)||void 0===K?void 0:K.some(e=>e.extensionNote||e.entryNote))&&(0,s.jsx)("p",{className:"text-gray-400 italic",children:"Sin novedades registradas."})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-20 pt-8 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"text-center w-1/3",children:[(0,s.jsx)("div",{className:"border-t border-black mb-2 mx-4"}),(0,s.jsx)("p",{className:"text-xs font-bold uppercase",children:"Conforme Empleado"})]}),(0,s.jsxs)("div",{className:"text-center w-1/3",children:[(0,s.jsx)("div",{className:"border-t border-black mb-2 mx-4"}),(0,s.jsx)("p",{className:"text-xs font-bold uppercase",children:"Responsable RRHH"})]})]})]}):(0,s.jsxs)("div",{className:"text-center p-20",children:[(0,s.jsx)("h1",{className:"text-4xl font-black mb-4",children:"Reporte General de N\xf3mina"}),(0,s.jsx)("p",{children:'Por favor seleccione un empleado individual para imprimir su ficha detallada, o use la opci\xf3n "Exportar CSV" para el reporte masivo.'})]})})]})}}},function(e){e.O(0,[761,897,963,712,354,774,888,179],function(){return e(e.s=81909)}),_N_E=e.O()}]);